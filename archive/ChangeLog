20.06.2012 Купала
	Изменил do_liblist чтобы mlist, rlist и прочие работали не только от двух
параметров (начало списка, конец списка), но и от одного (номер зоны). Для
zlist не актуально.
	Вывод сообщений базара переделал на манер аукциона, чтобы на базаре цветной
стаф не портил строку, устанавливая после себя цвет в серый. (Не очень понял что
сделал, но работает)
	Поправлены некоторые опечатки в коде (в основном - текст, так или иначе 
выводящийся пользователям).

04.04.2012 WorM
	inspect переделал по сути пульсы не должен пропускать(хотя он вроде
и не пропускал) заодно теперь в heartbeat передается int missed_pulses
сколько пульсов пропущено(т.е. не обработано) на данный момент, пока это роляет
только на inspect, который не будет ничо делать если есть пропущенные пульсы.
	Всякие приблуды с цветами, в основном касательно цветных мобов и предметов,
ключ &q(только если цвета менялись через & ключи а не отправлялись
прямым текстом) устанавливает последний цвет как стандартный(т.е. &n),
&Q устанавливает &n обратно в 0. Повтыкал их в perform_act и другие места
где разноцветный предмет/моб могли сбить цвета нафик, может нашел не все места,
но основное, как то см, огл, сообщения боя и промпт в бою нормально работают.
	Добавил в dg_script affected_by проверка висит ли на персе аффект закла.
пример: if %actor.affected_by(полет)% вернет 1 если на чаре есть флай
(заклом или шмоткой не роляет).
	На базаре б п броня выдаст не только предметы с типом БРОНЯ, но и
легкие/средние/тяжелые доспехи.
	Ингры больше не загружаются в клетку с флагом ДТ, а то чото бред ингры в дт
грузить, они не чистятся пока туда кто-нить не зайдет или зона не репопнет.
	Теперь если агрим чью-нить умку изгнать нежить, то хозяин получает флаг
на изгоняющего.
	Вроде исправил багу с тьмой в клетке после того как чара в тьме форс рентят.
	dg_cast теперь может кастить не только на чара по имени, но и по UID.
	Исправлен уклон от оооочень большого кол-ва атак.
	Убрал сдувание чернокам надува об зеркало.
	По мелочи исправил опечатки в коде.
	Команда где показывает теперь оба списка если найдены моб(ы) и предмет(ы).

11.03.2012 Polud
	Поправлены опьянение и опохмел в сторону улучшения их юзабельности.
Увеличен таймер опьянения, налажена зависимость времени похмелья от количества
выпитого. Кроме того, таймер опьянения обновляется в сторону увеличения при
принятии внутрь дополнительных доз алкоголя до определенного предела либо
до начала процесса отрезвления.

04.03.2012 Krodo
	Мобам 31 и выше уровня вместе с минимальными сависами сетится минимальный
каст, с 20 и дальше по +3 за каждый уровень.

03.03.2012 Krodo
	Снова по сетам: старая статистика груп/соло убрана, теперь используется
только одна общая с делением по размеру группы. Деление на соло/груп теперь
не только по уровню, но и по статистике зоны в целом, считается отношение
в основном убиваемых соло мобов к общему кол-ву убиваемых в зоне мобов.
При вычислении шанса дропа в груп-мобах нет привязки к уровню моба, весь
расчет идет от статистики убийств моба, чем большим составом его чаще убивают,
тем соотв-но и процент лоада больше. Из статистики убираются мобы с нулевой
экспой, клан-зоны, города (рента, банк и почта одновременно в зоне), мобы
появляющиеся только по временам года и полнолунию.
update:
	В конфиг добавлены поля тип сета и тип предмета, если тип сета авто - сет
делится на груп/соло автоматом по активаторам, если тип мануал - на каждую
сетину нужно вписать куда она идет, в груп или соло список, формат в начале
конфига описан. Для мини-сетов (8 и меньше предметов) в соло-списке шанс дропа
умножается на 1.75. В конфиг добавлены все минисеты с алиасами для справки.
	Воткнута команда 'show mobstat', 34 или прописывать в привилегиях show(),
формат: show mobstat <zone vnum>, выводит стату из собираемой для сетов.
	В релоад дропа сетов добавлен необязательный параметр - номер зоны, для
возможности очищения статистики мобов по какой-то конкретной зоне.

02.03.2012 Krodo
	Зафиксена обработка нулевой способности при взаимодействиях с чарами не
русичами, коими на данный момент похоже является только чар поренута, ну и код
немного причесан, копи-паст вынесен в отдельную функцию set_race_feats().
	По заявкам телезрителей убран спам сетов заклинаний мобам при старте мада,
информация не особо полезная, а спамит на пару-тройку мег.

01.03.2012 Krodo
	Зафиксен креш на сейве чармисных денег купца для возврата при креше, как бы
нелепо это не выглядело.

29.02.2012 Krodo
	Тут были претензии к рандому после обновления буста на серве в начале года,
в 1.47 эту либу дорабатывали, на всякий случай синтаксис подправлен под новый.

26.02.2012 Krodo
	В 'клан лог' добавлен дикей шмоток в хранилище.
Разделение сета на соло/груп теперь происходит автоматически при чтении конфига,
критерии теже - половина сета с максимальными активациями идет в групповой дроп,
остальное в соло. Воткнута справка по каждому отдельному сету, алиасы задаются в
конфиге списком на сет, по дефолту всем кроме валькирии воткнуто по два алиаса,
типа 'сетвв', 'сетвеликоговоина' и т.д.. Все алиасы видно по 'справка сет'.

25.02.2012 Krodo
	Добален сбор статистики убийств мобов с делением по кол-ву людей в группе.
Пока отдельно от системы дропа сетов, посмотреть надо будет че там соберется.

24.02.2012 WorM
	Исправлена ошибка с ювелиром в результате которой после вплавки
камня характеристики предмета могли не улучшиться.
	Убрал выбор расы раз уж делать их никто не собирается то и смущать
людей выбором незачем.
	Исправлено пару опечаток во время генерации персонажа.
	Воткнул загрузку именных вещей перед кланами, когда грузится кланхран
то он автоматом очищается от предметов которые есть в списке именных.
	В olc после редактирования вещи со всех старых объектов слетали флаги
именной предмет, исправлено.
	Добавил ключи &S и &s все что находится между ними выводится как есть
без преобразования цветов и _. В связи с этим подправил medit, oedit и nedit.
Везде где пишется e-mail тоже добавил ключи для корректного вывода.
	В dg_script добавил can_get_spell если он возвращает 1 значит персонаж
может выучить соотв. закл по мортам и левелу.
Пример:
if (!%actor.spelltype(мас слеп)%) && (%actor.can_get_spell(мас слеп)%)
  %spellturn% %actor% мас.слеп set
end

24.02.2012 Krodo
	Допилена тема с !рент одиноких фулл-сетин, должно смотреть в перс.хранилище
как при попытке ренты, так и при ребуте, если туда чет все же сныкали.
	В сетах для групп-мобах расчет уровня воткнут как среднее между уровнем моба
и средним уровнем мобов в зоне, потому что средний уровень зон по факту даже до
40 не дотягивает в самых топах и расчетный процент дропа занижается.

23.02.2012 Krodo
	Продолжаем про сеты. Вобщем концепция поменялась, изначально сет делится на
две равные части, в зависимости от активаций шмотки. Мелкие активаторы (большей
частью 3-5 предметов) идут в соло-дроп, более полные активаторы в групп-дроп.
У каждого типа дропа свои проценты в зависимости от уровня моба, для групп мобов
считается средний уровень мобов в зоне, а не уровень конкретного моба. Пока в
выборке только уникальные по макс.в.мире мобы, когда зафиксится тема с реальным
соответствием макс.в.мире и лоада за один резет - можно будет всех включить.
Уровни для соло: 25-31, для групп: 32+, проценты: 2-4,4 и 5-15. Реализован сам
дроп с учетом макс.в.мире на шмотке и обновление рнумов после олц.
update:
	Табличка дропа сетов добавлена как часть системы справки, а не отдельной
команды. Соответственно добавлены алиасы: сеты, сэты, наборыпредметов. Не уверен
в коректности кода добавления в справку, т.к. слишком уж давно не имел дел с
чистой сишной работой с памятью, мб есть микро-мемлики, но вроде работает.
При релоаде системы дропов или глобальной справки все взаимно обновляется.

22.02.2012 Krodo
	Чуть допилена генерация таблицы сет-лоада. Отсекаем лишние зоны, дубликаты
мобов по именам, по возможности подрезаем большие списки мобов в зонах. Шанс
лоада помимо макс в мире так же подрезается по уровню моба. Вывод таблички пока
по 'справка сеты'.

19.02.2012 Krodo
	В целом написана система раскидывания сетов по мобам из статистики ранее
убитых. Пока ниче не дропает, только выводит итоговую таблицу где что с кого
и какими шансами. А т.к. сбор статистики щас пойдет заново - там будет вообще
пусто, так что и говорить пока не о чем.

18.02.2012 Krodo
	Добавлен сбор статистики по убийствам мобов с разделением на соло/групп
киллы (понадобится для дропа сетов).

09.01.2012 Посвист
	Перенес релокейт на способность с ограничением частоты применения. Пока 
формула такая: 18 тиков -кол-во мортов. При агрорелокейте лаг 6 секунд 
(как при пенте). Ранььше было 8 секунд, но из-за бага не работало и давало меньше.
Также при релокейте на время лага вешаеться аффект, чтобы нельзя было ставить пенту.
	Смысл этих изменений - убрать возможность спамить цель релокейтом, с чем 
согласны даже игроки активно его юзающие, а также возможность фактически 
мгновенно сбросить на головы врага десант в виде последователей под масскасты, 
ни чем при этом не рискуя. 
	Вобщем релокейт остается овер фишкой в плане посмотреть, где сейчас враг 
за экспу (рип прыггера), и в случае, если прыггер простоит 3 раунда - 
спентить на себя гопу.
	Пофиксил баг с командой "время", не забываем инициализировать локальные переменные.

08.01.2012 Krodo
	Добавлена команда 'клан лог <без параметров|строка поиска>', без параметров
выводит кто чего взял/сдал в клан-хране. При параметре ищет записи с указанной
строкой. Сохраняется между ребутами. Ограничение от фанаря 5к записей. Доступна
всем членам дружины без отдельной привилегии.
	Вобщем раз уж втянули в эту тему с сетами, да при участии глобал дропа и
черных свитков, то будем пробовать менять устои. Про наборы больше 8 предметов:
эти сетины не отправляются почтой и не ставятся на базар. Если у чара только
одна сетина из такого набора, то он не может ее зарентить или положить в перс.
хран, только в клан-хран или на аук. Зарентить ее можно только через креш-рент,
но при старте мада тоже будет проверка и обнуление таймера.
	Что это дает в целом: если неклановый чар снимает шмотку из фул-сета, то у
него варианты только продать ее через аук, кому-то передать или выкинуть. Если
сетину снимает клановый чар, то добавляется вариант сунуть ее в клан-хран. Если
у чела получается две и более сетины, то может их рентить и спокойно носить.
	Пока проверка рент при старте отключена, чтобы у кого-то внезапно не ушло
чего-нить на ребуте, после анонса через пару-тройку дней заработает.

07.01.2012 WorM
	В именные предметы добавлены поля с мессагами вокруг перса при
одевании/недоступности вещи.
	При выводе инфы по лоту на базаре/ауке волхвам видно кол-во зарядов в рунах.

06.01.2012 Krodo
	Зафиксена запись за массив при сете голода/жажды/опьянения через имский set,
получившаяся из-за смещений сет-команд.

04.01.2012 Krodo
	В энчанты добавлено изменение веса, как в плюс, так и в минус, в олц через
values первым параметром. Пришется при опознании в доп. свойствах, ниже 1 не
уменьшает. Зафиксено имя энчанта при сейве/лоаде, а то тока первое слово брало.

02.01.2012 Krodo
	Добавлен тип предмета: для зачарования. Тема пока на замену инкрустации, но
в перспективе хочется скидать сюда все перманентные изменения шмоток, чтобы ими
множно было играться через прототип. Система такая: сам энчант - это предмет, из
которого берутся статы и аффекты. Одеваемые слоты энчанта используются для
проверки слотов целевой шмотки, т.е. если энчант можно одеть только на голову,
то и применить его можно будет только к шапкам. На целевой предмет сейчас
переносятся: аффекты, наводимые аффекты, экстрафлаги и неудобства. Т.е. если на
энчанте стоит !лекари, то после энчанта шмотка станет тоже !лекари. Сам процесс:
'применить имя-энчанта имя-шмотки', можно из инвентаря. Пока есть ограничение на
сеты, но технически можно и их, при деактивации перенакатывать аффекты. После
энчанта аффекты сохраняются и видны по опознанию вместе с именем предмета, с
которого энчант был получен.
	Для раскрутки всего этого дела в глобал-дропе добавлено поле макс уровня для
моба. Воткнуто три типа энчантов, каждый со своим счетчиком и диапазоном уровней
мобов 6-20, 21-35, 36+. Есть два списка аффектов, основной и дополнительный. На
первый диапазон генерится 1 стат из основного, на второй - 1 основной и 1 доп.,
на третий удвоенный основной + дополнительный. Аффекты не все, 16 штук оставил.
	Инкрустация пока не убрана, но слоты при старте мада у прототипов чистятся
и сама команда отфутболивает.

31.12.2011 Krodo
	Снята планка на мудрость, соотв-но немного поменялись бонусы с нее, но в
целом расхождения небольшие со старыми значениями. Формула увеличения дамага
от мудры пока заменена на попроще: +5% дамага за каждую мудру начиная с 23.

30.12.2011 Shapirus
	Добавлены теллы чармиса при дикее его стафа по таймеру.

30.12.2011 Krodo
	В старых магазах убрана тема для страфа с полем овнера, считающая его как
стаф из списка продакшена магаза.
update:
	В книгах улучшения умений если макс % умения стоит <= 0, то считается, что
книга апает умение до макс скилла конкретного морта изучающего (80 + морт * 5).
	В систему глобал дропа для затравки добавлен дроп таких книжек, генерящихся
рандомом по 10 скилам (список формируется в generate_book_upgrd). Из прототипа
берутся поля: на сколько поднимается умение и макс % умения. При опознании такой
книги указывается точный максимум или напоминается про макс на реморт.
В проверках на книги апгрейда get_skill заменен get_trained_skill.

25.12.2011 Krodo
	Про богатырей: можно вставить в перчатки 1-3 камня. Команда 'вставить',
аналогичная вплавке, только без рандом составляющих. Оформленно пока в виде
врожденной способности 'инкрустация', чтобы как-то обозначить тему. После
вставки любого камня перчатки становятся богатыри-онли. Слоты видно при
опознании и богатырям при простом осмотре. Слоты проставляются автоматом
в прототипы при старте мада от среднего уровня мобов в зоне, 15-24 = 1 слот,
25-34 = 2 слота, 35 и выше = 3 слота (таких перчаток щас 20 в маде).
	Врожденная способность 'богатырская сила' - при кулачном бое дополнительно
по +1 дамролу за каждую силу выше 25.
	Молот по холду имеет шансы сбашить с лагом в 3 раунда. Шансы: 'задел' = 1/3,
'пошатнул' = 1/2, сотряс = 100%.
update: зафиксено с несколькими моб-спешиалами в комнате, терь по умолчанию
прогоняются все, как обычно, а при 2. и далее - конкретный по счету спешиал.
	При вставке камней до кучи суется флаг !чармисы. Сеты в принципе и так не
попадают под эту тему, т.к. лежат в отдельных зонах без мобов, но на всякий еще
воткнута проверка, чтобы сетине сокетов не навтыкать.

19.12.2011 Polud
	Практически доделаны "новые" магазины, описываются в файле 
plrstuff/shop/shops.xml.
	В новых магазинах сделана починка экипировки (не только инвентаря) - 
команда "чинить экипировка". 
	Сделана обработка двух и более мобов со спешиалами в одной комнате - 
обратиться к конкретному мобу можно, указав его порядковый номер перед 
командой спешиала, например 1.куп, 2.спис, 3.постой и т.д. 
	Переделана процедура зачистки мира после праздника. Мобы и предметы, 
задействованные в празднике, помещаются в отдельный список, из которого 
удаляются при пурже в собственном деструкторе. Соответственно теперь не 
так страшно (надеюсь) будет дергать эту процедуру почаще - пока поставил
раз в 10 минут, посмотрим что получится.

11.12.2011 Svent
	Пофиксено сплозание флагов у предметов.
Снят патч с ограничением на левые скиллы с предметов. Народ морально к сему не готов.
Имелпменторам возвращена команда снятия /постановки душиков.

28.11.2011 Svent
	Убран флаг "только для душегубов". Дурная была идея -- его вводить.
Также скиллы со стафа, если не родные, режутся до 5%. В перспективе можно скиллам
сделать флаг -- можно или нет его юзать со стафа.

27.10.2011 WorM
	Исправил показ инфы по тригам в stat room.

27.10.2011 Polud
	пкл и дрл отображают персонажей в ЛД.

25.10.2011 Лехич
	Теперь когда берешь контейнер, который сам не окровавлен, но содержит окровавленные вещи,
то пишется сообщение про пачкание рук. 
	Если чар умер в агро бд, то его стаф не кровавится.
	Если у убитого в инвентаре были трупы, то на них флаг не вешается (а то получается,
что чар 1 слутил труп чара 2, и после убийства чара 1 труп чара 2 не могли дать чару
2 потому, что он щитался вещью чара 1).
	При прикосновении к кровавому стафу время бд рассчитывается с учетом того, когда был
убит владелец (если убит 5 минут назад, то БД 25 минут).

24.10.2011 WorM
	Исправил абьюзы прикрыть и ангела в пк.
	В dg_script добавил поле arenahp, макс.хп которе допустимо на арене с учетом
дрына чернока, покрова клера/волхва и ужей согрупникам.

20.10.2011 WorM
	В utils.h добавил две ф-ции int count_colors(char * str) считает кол-во цветов в строке
и char* colored_name(char * str, int len) возвращает строку указаной длины с поправкой на
цвета, чтобы списки объектов и т.п. вещи выглядили как нормальная таблица.
	Вставил вызов ф-ции colored_name в nlist и olist.
	nlist теперь может принимать один или два параметра начало-конец диапозона vnum'ов.
	stat показывает флаги мобов может быть нанят, вооружается и т.п.

18.10.2011 Лехич
	Добавлена возможность вливать кроме статсов и другие характеристики за 
постоянную славу (слава2). К уже имеющимся, добавлены: макс.жизнь, 
успех.колдовства, сейвисы (воля, стойкость, реакция) и резисты (разум).

14.10.2011 Polud
	В звериной форме:
	1. Запрещено использовать команды "вооружиться" и "держать". При превращении все что 
	было в руках - выпадает из лап в инвентарь.
	2. Запрещено ездить верхом. И вообще пугать лошадок.
	3. Вешаются автоаффекты, описываются в файле форм.
	4. Запрещено произносить заклинания.
	После превращения теперь вешается лаг. Решение временное, может быть переделаем на timed_skill.

12.10.2011 Лехич
	Поправлен баг, из-за которого флаг !окровавлен! снимался со стафа раньше положенного срока.
	Теперь окровавленный стаф можно лутить чаром, у которого совпадает мыло с убитым без получения БД.

09.10.2011 Лехич
	Куны при бросании на землю теперь объединяются в 1 кучку. 
	При поднятии трупа вещи из трупа выпадают на землю (главным образом, 
чтобы не абузили поднятие трупа с кровавым стафом). 
	При проверке, должен ли кровавиться стаф убрана зависимость от кланфлагов 
(не уверен, что оно работало правильно). 
	Убрал возможность постановки пенты в одну клетку с кастующим, ибо 
выглядело это странно. 
	Сделал таяние старой пенты при постановке новой.

09.10.2011 WorM
	В inspect'е добавил подсветку если чар онлайн.
	При multireset'е в сислог пишутся номера всех зон комплекса.
	При выдаче если именные предметы есть в мире то пишется другое сообщение.
	При редактировании объектов через олц если меняем тип на что-то кроме
оружия/ёмкости/фонтана/ингредиента, то номер скилла устанавливается в 0.
	dg_cast не спамит об отсутсвии цели если применяемый закл оживить/поднять труп.
	В сч все добавлен учет прицельных/мощных атак.
	Сделал шитье рабочим(тестовый вариант), неплохо было бы пообщатся с тем кто
доделывал освежевать, чтобы прояснить суть тех значений которые проставляются в val0-2
у полученных шкур.

07.10.2011 Polud
	Поправил сохранение изученных форм в файл игрока. Поправил сохранение умений
при выходе из игры в звериной форме.

04.10.2011 Polud
	В первом приближении, для тестов, выложен скилл "обернуться". Также сделана
команда "morphset" для добавления тестовым чарам звериных форм. Формы описываются 
в файле LIB_MISC"morphs.xml". Окончательно искоренены GET_CHA, GET_WIS и пр., 
что там еще оставалось. Вместо них сделаны геттеры, которые возвращают различные 
значения в зависимости от текущей формы персонажа. Для доступа к врожденным 
характеристикам есть специальные геттеры, типа ch->get_inborn_???(). 
Переделан вывод описания персонажа, сделана замена умений, изменена прокачка 
умений в зависимости от формы. Вариант не окончательный, так что подробности 
будут позже, по мере допиливания.
	Убрал старый парсер xmlParser, обновил действующий парсер до версии 1.0.

02.10.2011 Лехич
	Введен флаг !окровавлен!, вешается на шмотки усопшего после убийства игрока игроком.
Не вешается при убийстве по мести или убийстве душегуба.
Если игрок берет окровавленые шмотки, то получает бд на 30 минут. Окровавленые вещи нельзя 
бросить, положить в контейнер вне инвентаря, продать в магазине, через аукцион, выставить 
на базар, украсть. Отдать можно  только тому, с кого слутили, или его одноклановцу/соальянсеру.
Флаг спадает через 30 минут, или если вещи попадают в руки владельцу/соклановцу/соальянсеру.
На вещах флаг отображается припиской красными буквами "..покрыт кровью!"
	Еще из заметного, вызов pk_revenge_action перенесен из die в raw_kill, чтобы на момент 
создания трупа мести еще были живы. 

30.09.2011 Лехич
	Флаг душегуба вешается при 25 убийствах уникальных (в плане email) игроков.
Проклятие богов вешается при наличии больше 3 местей тоже на уникальных игроков.

30.09.2011 Krodo
	На тему заточек, кузнецов и внимательности: у меня с последним патчем вообще
не собралось в этом месте. Подправил, но особо не вникал.

30.09.2011 WorM
	У именных предметов при одевании сообщение вылазит только в 20%
случаев(жаловались на спам).
	Исправлены опечатки в коде где вместо кириллицы использовались буквы
латиницы которые выглядят также.
	Сообщения об ошибках в тригах мобов и объектов пишут vnum трига.
	Добавил показ всяких флагов при stat'е персонажа.
	Восстановил недоступность заточеных/укрепленных вещей персонажам
не являющимся кузнецами, аккуратнее удаляйте условия всякие про печенегов и тп.

27.08.2011 Svent
	В misc добавлен файл classskills.xml В него перенесено то, что раньше было
в skills.xml В skills.xml теперь содержится инфа по скиллам. Все это парсится, в
класс Skill заносится, но покамест нигде не используется. В перспективе из кода
надо выдрать всякое забивание параметров скиллов прямо в коде и использовать
этот файл. Кроме всяких classknown и другикх зависимых от класса параметров -
им место в описании классов.
	Чтобы не дублировать код, в db.cpp добвлена функция XMLLoad, которая
делает базовые телодвижения, как-то: пытается загрузить сам файл и найти
указанный корневой тэг, плюс отрепортить в сислог если будут ошибки. Под это
дело переделан лоад в родах и точках входа. Если кто будет добавлять XML
конфиги - наверно есть смысл использовать эту функцию.

25.08.2011 Krodo
	В магазинах чтобы ничего не править пока воткнуто, что все типы доспехов
покупаются/чинятся, если в списке покупки есть тип броня.
	В сохранение аффектов плеера добавлено поле battleflag, что должно решать
проблему таймера завязанного на это поле аффекта после ребута/ренты.

24.08.2011 Krodo
	Мобы и чармисы могут одевать любой тип доспехов. На счет мин.мортов - мобы
игнорируют и одевают все, чармисы по мортам хозяина.
	Воткнута временная команда 'armor' для билдеров, желащих в свободное время
заняться разделением доспехов на типы. Справка пишется при пустой строке ввода.
Выводит список шмоток, сортированных по среднему уровню мобов в зоне.
update: в armor добиты материалы и аффекты (Мткань Аоба и т.п.).

23.08.2011 Krodo
	Добавлен тип предмета: легкие, средние и тяжелые доспехи. Т.е. щас шмотка
может быть как просто типа 'броня', так и легким типом доспехов например.
В случае какого-то из трех типов доспехов работают ограничения на ношение по
профам. У проф по этому случаю добавлены родовые способности на ношение
определенных типов доспехов. Тип доспеха пишется по осмотру шмотки (если есть,
что писать) или через любое опознание в поле типа предмета. На базаре и клан
хране работает тема с Тлегкий/Тлегкие и т.п. + 'б п л/с/т' (описано в пустой
выдаче базара). Если одеть шмотку нельзя - пишет какой способности нету.
	Бонус силы на вес пушек приведен через формулы к старым значениям, потому
что еще не известно, когда до них руки дойдут. Если пушка слишком тяжелая, то
пишется сколько надо силы (с двуручами попозже).

22.08.2011 Krodo
	С силы снята планка в 50, соответственно GET_STR разбит на гетер/сетер,
тоже самое с STR_ADD. Расклад по бонусам от силы тоже немного поменялся, чтобы
нормально отобразить в виде формул, а не таблиц.
update: тоже самое для ловкости, подправлены бонусы от силы в паре скилов
и бонус на дамролы воткнут по единице выше 14 (как было), чтобы не плакали,
сами по себе цифры пока не так и важны.
	Подправлена экспа на левел для татя, на нескольких уровнях разница экспы
была меньше, чем на предыдущих, ну и в целом на 30% подняты требования, что
никак не отменяет полной халявы по сравнению со всеми остальными профами.
update: с ац бонус воткнут старый, разница в 5 слишком уж пока влияет.
	На шмот добавлен параметр минимально требуемых перевоплощений для одевания.
С редактированием через олц (x в главном меню). Кол-во ремортов пишется при
попытке одеть или при опознании (если требование выше нуля).

21.08.2011 Krodo
	Воткнута минимальная планка хп мобов по уровню, не такая жоская как в
прошлый раз и это тоже временно.
	Вывод сообщения про диво дивное переделан на ручной проход по комнате,
через акт вполне мб, что и не всегда пишется, не вникал.

10.08.2011 Svent
	Из кода убраны все названия родов и рас. Соответственно убраны и
константы родов и рас, теперь все это определяется через файлик playerraces.xml,
и оттуда же берутся все названия и параметры. Пока не обрабатывается ситуация
"у рода убрали родовую способность", она так и остается у кого была до реморта в 
силу кривости системы способностей, которую исправлять в данный момент ленииво,
все все равно переписывать. Добавление/удаление родов в целом обрабатывется
корректно, но после редактирования файла нужна перезагрузка.
Пока не убрана из кода константа NUM_KIN, ибо в ей червие и приколочено ржавыми гвоздями.
B этой причине баловаться с расами через файлик пока не получится, 
точней получится но не все будет работать.

07.08.2011 Krodo
	Зафиксено спадание аффектов у чаров при перезаходе в игру.
Попутно по заявкам телезрителей воткнуто 'hcontrol owner рента имя' для
принудительного смены воеводы. Доступна любому уровню при наличии команды
hcontrol в целом. Онлайн в этот момент кроме самого имма никого не требует.
Единственное, что новый воевода не должен в этот момент состоять в другой
дружине (шоб не напутать чего случайно с номером ренты). Но при желании
всегда есть hcontrol outcast, который тоже работает для оффлайн чаров.
Члены дружины, находящиеся онлайн, уведомляются о том, что смена воеводы
была произведена принудительно.

17.07.2011 Svent
	Первая итерация выноса родов из кода в xml-файл. Добавлены родовые
способности, то есть способности, привязанные к роду, а не классу. Задаются
через файл misc/playerraces.xml. Автоматически появляются/удаляются после
изменения файла и ребута (горячую перезагрузку решил пока не делать).
Ситуация с удалением рас/родов тоже пока не обрабатывается, так что не балуйте.
В связи с этим удалены расовые бонусы, коорые ранее были прописаны в 
файле констант.
ВНИМАНИЕ: Роловые способности не совместимы с изучаемыми! Если какая-либо
способность может изучаться персонажем из книг, у тренеров и так далее, то
ее нельзя использовать в качестве родовой. К врожденным способностям это 
не относится.
ЗЫ: всем вольным кодерам и любопытствующим нужно обновить папку misc

24.06.2011 Polud
	Изменил сообщение при поднятии предмета с земли на "... поднял...".
atoll заменил на lexical_cast, ибо под студией не собиралось. Вернул в 
новые магазины полный список по команде "список" без аргументов.

18.06.2011 WorM
	Игрокам добавлен флаг executor(палач), set имя executor on|off,
при убийстве палачом игрока, игрок теряет только куны.
	При otransform'е сохраняется информация об оригинальной зоне.
	Исправлена ошибка в результате которой wskilladd не работал.
	После редактирования через olc объектов флаг таймер запущен
восстанавливается, uid тоже.

13.06.2011 WorM
	Добавлен необязательный параметр для stat room [vnum],
без параметра работает по старому для текущей клетки.
	vstat mob|obj показывает реальное кол-во в мире.
	Исправлена работа тригов на урон если бьют чармисом.
	На базаре для всех операций используться не только деньги со счета,
но и с рук.
	На базаре, аукционе видно кач-во ингредиента(при наличии способности
травник), материал(купцам), слоты под камни(кузнецам с ювелиром).
	В новых магазинах: команда опознать заменена на характеристики,
добавлена возможность вывода списка по имени, а не только полного.
	Добавлено вспомнить гбогам, сообщения которые ты не должен видеть
из-за левела ты не увидишь по вспомнить.
	Если wld тригер пишет ошибку также он выводит vnum тригера.

23.05.2011 WorM
	Исправлен баг с обновлением таймера и прочности у вещей если их
редактировать через olc.
	dg_scripts поле skill возвращает реальный % скила у персонажа без
учета бонусов от стафа.

22.05.2011 Krodo
	В магазинах зафиксена тема с обновлением рнумов после олц.
До кучи у странствующих торгашей подправлено, чтобы не лоадились в виртуалках и
не более одного на зону в случае нескольких рентеров.

21.05.2011 WorM
	Подправлен поиск в хранилище по имени.
	При покупке с базара если продавец удален, то у покупателя все
равно вычитаются куны.
	Поля опыта "моястатистика" изменены на unsigned long long, а то экспа
уходила в минус. Увеличено кол-во цифр выводимых в табличке, добавлен параметр
"моястатистика очистить". Подправлен учет рипов в пк, дт и т.д.
	Добавлена возможность опознавать магические ингры.
	В команду уровни добавлен показ макс опыта на уровень.

12.05.2011 Polud
	Убрал двойную проверку на металл при использовании умений "заколоть", "украсть"
"подкрасться", "спрятаться" и "маскировка". Теперь везде используется функция
equip_in_metall.

04.05.2011 WorM
	Добавлена способность зачаровать, дает возможность впихнуть в клона закл
который будет кастица в того кто убил клона. Аффект !зачарован! вешается на клона
и дает ему +морт*4 каста. Пока что можно запихать только заклинания наносящие урон
и не массовые.
	Волхвам при осмотре рун добавлена строка Прототип: <имя прототипа>.
	Сделана отвязка ренейма от 34 левела.

29.04.2011 Krodo
	При фризе теперь можно пользовать команды: конец, постой, счет и их алиасы.
В 'счет' и 'счет все' скопипастена с дамба инфа о фризе, кто/на сколько/почему.
	В камни для ювелирки добавлен внум для стекла отдельного, чтобы в магазине
можно было выставить с предельно ясным названием.
	В клан пк в дате добавлены час:минута для последующих записей.

16.04.2011 Krodo
	Зафиксен креш с отложенными тригами на игроке, т.к. вообще-то старый код
на такую тему не закладывался и при пурже игрока триги не обрабатывались.
	До кучи пару варнингов в fight.cpp.

06.03.2011 Polud
	Добавилась команда "война". Теперь игроки могут видеть сводку о 
текущих боевых действиях дружин. Команда без аргументов - все войны,
с аббревиатурой в качестве аргумента - войны конкретной дружины.
	Изменена команда 'нанять'. Теперь можно нанять уже нанятого чармиса
на новый срок, не отпуская его. Кроме того, наличие чармиса не мешает
узнать цену найма другого моба.
	Функция char.room возвращает теперь UID комнаты, а не RNUM, как было.
	Сообщение татям о замках, на которых нельзя тренировать умение, выводятся
серым цветом.
	Мобам с флагом !сражается теперь нельзя нанести урон массовым заклинанием.
	
26.02.2011 Polud
	Патч mixaz на предмет добавления в дг_скрипт объекту room метода objects,
который возвращает список объектов в комнате на полу.

24.02.2011 Polud
	Добавлена возможность очистить мир от последствий праздника. Команда 
"зачистить" или автоматически раз в 12 рл-часов.

06.12.2010 Polud
	Переделана система праздников. Теперь они описываются в файле 
LIBMISC"celebrates.xml". Три типа праздников - языческие, христианские и РЛ. 
Праздник описывается четырьмя параметрами - номер месяца, номер дня в месяце 
(исходя их современного календаря(!)), количество часов до даты праздника и 
количество часов после даты праздника, на которое продляются праздничные
мероприятия. Для РЛ-праздников это РЛ часы, для мадовских - мадовские часы. 
Для каждого праздника может быть задан список комнат, список 
мобов/объектов/триггеров в комнате, а также объектов/триггеров в мобе или 
объекте, которые нужно загрузить. В отдельной секции может быть задан список 
_существующих_ объектов/мобов, к которым требуется прицепить триггера.
Когда наступает время праздновать - в указанные места грузятся все эти прелести.
Ограничения - не допускается пересечение времени для праздников одного типа;
для мадовских праздников дата должна указываться исходя из того, что в году
12 месяцев по 30 дней.

16.11.2010 Svent
	Увеличил и уравнял длительность большинства положительных аффектов, кроме
ЗБ и маг. щитов. У некоторых особо злых аффектов длительность урезана по сравнению
с остальными. Убрал фейл каста хранителей, если персонаж не в бою. Если в бою -
фейл даже больше, чем раньше, нечего щелкать клювом. Заклинания !тьма! и !свет!
теперь кастятся только на согрупов во избежание абьюзов. Увеличен шанс срабатывания
способности "предсмертная ярость", уменьшен шанс фейла способности "легкая поступь".

15.11.2010 Svent
	Добавил на базаре показ состояния предмета в общем списке.

13.11.2010 Krodo
update: откачено, всем спасибо, я все понял
	В snoop добавлено ограничение на подслушивание персонажа, чья дружина
находится в состоянии войны с дружиной имма (при условии, что хотя бы один
чар данного имма состоит в дружине, которой объявлена война, проверка идет
по мылу чаров). В set email добавлено ограничение на смену мыла персонажу,
у которого текущее мыло совпадает с мылом меняющего имма (своему же чару),
ну а сам себе имм и так сетить никогда не мог.
	В связи с этим хотелось бы поднять вопрос о проверке одинаковости мыл
иммов и их морталов (за игроками в этом плане следить ведь не лень). Имм
при входе в игру на дубликат мыла проверку не проходит, поэтому мортал с
таким же мылом ему никак не мешает.

12.11.2010 Svent
	Заблочил вызовы тригов на смену времени, пока кто-нить не сподобится
привести их во вменяемый вид. Бегать каждый тик по всем комнатам, объектам
и мобам мада - это как-то чересчур сурово. Я канеш понимаю, что программерам
ресурсов всегда мало...

04.11.2010 WorM
	Подправлена работа с сообщениями у именных предметов.
	Подправлена работа inspect.
	В клан хране добавлен поиск по экстрафлагу также добавлена возможность
искать вещи с дырками А1-3 соответсвенно 1-3 дырки. Подправлен вывод + и - для
реакции, защиты и т.п.
	Добавлен новый тип тригеров смена времени(числовой аргумент 0-23
срабатывает именно в этот час, 24 срабатывает каждый час, 25 рассвет, 26 утро,
27 закат, 28 ночь).
	Добавлен флаг мобам игн.печать.
	Исправлено(надеюсь совсем) mob_activity, когда некоторые мобы не
ходили/вооружались/одевались и т.п. хотя имели соответствующие флаги.
	Исправлены надписи в аффектах о бинтах. Заодно добавлены переводы строк
в некоторых местах(чтобы разные сообщения не слипались в одну строку).

29.10.2010 Polud
	Введена сложность замкОв на контейнерах и дверях. Примерно оценить степень 
сложности может персонаж c умением "взломать", посмотрев на дверь или предмет. 
При попытке взлома, кроме обычного фейла, считается вероятность сломать замок. 
Сломанный замок нельзя взломать и отпереть. Флаг двери сбрасывается при ресете 
зоны. Соответственно, поправлены команды OLC. У дверей сложность проставляется в 
редактировании выхода, у предметов - во флагах предмета (obj_val3). Команде
%door% в триггерах добавлен параметр сложность замка (lock).
Для хранения используется байт, посему диапазон значений от 0 до 255.
Умение "взломать" не качается на замках, по сложности на 10 и более
отличающихся от уровня раскачки умения.
	Попутно переделалась логика работы с дверьми, поскольку она показалась
мне марсианской, и слегка изменился формат wld-файла - в третьей строке описания
выхода добавилось число - сложность замка. Если будут глюки -
пожалуйста сообщайте.
	Умертвия моба теперь не мешают мобу загружаться при репопе зоны. 

26.10.2010 WorM
	У именных предметов добавлено два параметра сообщение при одевании и
сообщение при недоступности вещи.
	Если персонаж в слепоте подсекал, то видел кого, исправил.
	Патч от Четыря с воровством коней. Плюс насколько я понял исправлена пара
опечаток.

18.10.2010 WorM
	Небольшие исправления, дополнения в nlist, nedit и inspect.

13.10.2010 WorM
	Добавлено вспом ггруппа или группа.

02.10.2010 Krodo
	При входе в игру воткнута проверка религии на доступность относительно
текущего ролла при создании чара, в случае недоступности религия меняется.

07.09.2010 WorM
	При опознании сетов пишется нечто вроде:
Часть набора предметов: доспех верного наемника
   доспех верного наемника
   перчатки верного наемника
   повязка верного наемника
   сапоги верного наемника

04.09.2010 WorM
	Исправлено лечения ядов наемников заклинанием удалить яд.

03.09.2010 WorM
	Исправлена опечатка в названии функции get_lastlogon_by_unique.
	Сделано olc для именного стафа nlist(без параметров) список, nedit vnum
редактирование(там же можно удалить именную вещь из списка). Именные вещи теперь
нельзя класть в хран.
	По настойчивым просьбам вроде как починено метнуть у мобоф, терь метаюца
только те мобы у которых есть скилл, плюс мобы теперь одеваются/вооружаются
в бою и из инвентаря, а не только с пола, а то тупизм какой-то был.
	Добавлена имм команда inspect собственно набираем ее и видим краткий хелп.
В связи с чем в player_table добавлены поля mail и last_ip и чуток изменен
формат файлов персов(поля мыла и хоста вынесены на загруз при ребуте),
вобщем мад будет чуток дольше грузиться.

25.08.2010 Krodo
	Вобщем я пока завязываю, вайп тут мне если и видится реальным, то это будет
довольно мутный сам по себе процесс в плане фиксов и что в это время будет
происходить в маде тоже не ясно, вернее ясно, что ничего хорошего.
Самую жесть с хп и хитролами откатил, а кодить чета для текущей системы уже
просто не интересно, она мне не нравится.

24.08.2010 Krodo
	В зону добавлено поле 'средний уровень мобов' - т.е. тупо уровни всех мобов
в зоне сложили и поделили на их кол-во. Считается только при ребуте, после олц
чета не вижу смысла пересчитывать каждый раз, все же гоняется приличный цикл.
Пишется по zlist и show zones. В show zones до кучи добавлена опция -l x [y],
'show zones -l x' - конкретный уровень, 'show zones -l x y' - от x до y уровня.
Поле пока не используется, но пригодится в дальнейшем.
	С 0.7 ац от дексы откатил, надо чет более умное тут в плане мортов делать,
правда четкого понимая что именно все еще нет, хотя варианты есть.
update:
	Как ни странно, но в маде никогда (или очень давно) не было всем известного
5% шанса попасть по любому ац, потому что автора подвело целочисленное деление.
Зафиксено, но как оно будет черт его знает...

23.08.2010 Krodo
	Продолжая тему хп у чаров: на 7 понижен макс бонус ац от ловкости, у мобов
31+ в том числе не групповых хитролы терь не проставляются поверх родных, но
сравниваются с результатом и ставится лучший вариант, с хп таже тема, только
у групповых множитель повыше (и хитролы и хп пишутся в олц шоб поудобнее).
Штраф осторожки опять убран, чета мне кажеца так правильнее у мобов.
	Снижен бонус удачи от обаяния, собсна стат/2, т.е. половину шмотом +удача.

22.08.2010 Krodo
	На счет странствующих торговцев: терь лоадятся не в комнатах рент, а просто
в зоне с рентером в рандом комнате, чтобы не часто попадать в окружение в зонах,
где единственный выход с ренты блокируется другим магазином. Канеш есть еще
вариант два магазина подряд и выход из одного только через другой, но это чет
уже клиника заморачиваться на такое.
update:
	Хп у всех проф приподняты вобщем, как в процентовке на каждое +тело, так
и вообще на пару хп за левел.
	По мобам из груп.зон: воткнуты обратно свой расчет хитролов, минус штраф от
осторожки, частичный дамаг на верхних кубиках дайсрола, мин планка хп 31+ лвла.
	В справку добавлена так сказать опция "справка групповыезоны" или
"справка групповые зоны" - распечатывает текущие груп.зоны с именем и кол-вом
рекомендуемых игроков (ну чет более удобное обламывает ваять).

21.08.2010 Krodo
	Зафиксено моб активити, чтобы продавцы из новых магазинов не входили к
стоящим на месте продавцам старых магазинов и не забивали их спешиал, ну и
до кучи терь моб не войдет в комнату к мобу с таким же спешиалом.
	Про экспу с мобов из групповых зон пока тема такая:
само поле экспы на мобе остается без изменений и ставить можно как обычно до
этого ставилось (от фанаря), в случае групповой зоны эта экспа будет разделена
на указанное в поле зоны кол-во человек (пишется по vstat возле экспы).
Если моба убила группа равная или меньше по численности указанному в зоне
числу - каждый получает по 'экспа/цифра из зоны', т.е. если зона на 5 человек,
то не важно, убили моба впятером или втроем - экспы каждый получит одинаково.
Если группа больше указанной в зоне - идет штраф по 20% за каждого человека
сверх нормы вплоть до нуля.
	Групповую зону видно в zlist (число выше нуля слева от имени), плюс по
гдея/зона и vstat mob (после поля экспы) в случае, если зона групповая.
Групповой считается зона с числом рекомендуемых игроков 2 и более (ставится
через zedit), все, что ниже - просто обычная зона как раньше. Для начала
предполагается, что коснется только более-менее топовых зон.
	При смерти терь отнимается дсу/(4 + морты/5), но не более дсу/7, т.е. до
15 мортов, на которых будет по 14% отниматься.
update:
	На счет штрафа в груп-зонах при превышении указанного кол-ва человек терь
это выглядит просто как минимальное кол-во человек в группе при расчете экспы.
Т.е. если зона на 5 человек и ее идут семеро, то экспа считается как обычно до
этого считалась, если ее идут 1-4 чела, то экспа будет как на пятерых.
	В 'show zones' добавлен ключ -g для вывода текущих груп-зон и в самой
распечатке зоны пишется значение поля группы.

20.08.2010 Krodo
	В клан-хранилищах воткнуто опознание предметов по прядковым номерам в
имени, типа '2.меч' и т.п..
	Зафиксено увеличение лидерки на рипе согрупника при наличии шмота +скил.
	В дметре 'не персонажи' отображаются только при наличии какой-то дамаги.
	На базаре у камней для вплавления пишется, если это стекло.
	Зафиксено сбитие надува об мобов с зеркалом.
	Поле группы в зоне переделано на числовое значение. Подразумевается, что
при числе <= 1 зона является обычной, а при >= 2 групповой на указанное кол-во
человек. Пока не используется, но за выходные вроде как обещают проставить в
зонах что-то осмысленное, а к тому времени уже и с экспой че-нить нарисуется
ко всему этому делу.

15.08.2010 Krodo
	Откачено с хп, хитролами, осторожкой и частичным уроном, доводить до ума
не вижу смысла, всеравно это будет не то, что тут всем (оставшимся) нужно.

14.08.2010 Krodo
	Тестово воткнута мин. планка на хп мобов 30+ уровня: 3к + по 1к за левел,
цифры из среднего значения текущих хп мобов по уровням, т.е. даже при условии
деления на кастеров и файтеров - у кастеров должно быть не меньше этого.

10.08.2010 WorM
	Добавлены файлы named_stuff.cpp и named_stuff.hpp плюс соотв.изменения
в Makefile, в house.cpp и house.hpp добавлены ф-ции is_clan_member и
is_alli_member.	Добавлен экстрафлаг именной предмет. Список именных вещей хранится
в файле plrstuff/named_stuff_list.xml выглядит примерно так:
<?xml version="1.0"?>
<named_stuff_list>
	<obj vnum="4000" uid="942580662" mail="mail@mail.ru" can_clan="0" can_alli="0" />
</named_stuff_list>
перегружается командой 'reload named'
	При редактировании списка желательно отредактировать вещь проставить
макс в мире: 1 и отключить от нее триги.
vnum - собственно внум именного предмета на данный момент у нас только сумки
uid - владелец предмета, то что пишется в поле Unique: когда статишь чара
mail - мыло чаров владельца предмета
can_clan и can_alli - необзательные парматеры если отличны от нуля то чары
с клана(альянса) могут лутить шмотку, отпирать и запирать может токо владелец
(если мыло совпадает то это тоже владелец).
	Получаем у ямщика команда: 'получить вещи'. На данный момент когда
вещь получают у ямщика на нее вешается флаг именная вещь и все триги
с нее детачаца(при репостое флаг восстанавливается и триги опять детачаца).
update: подправлен constants.hpp чтоб работали триги с dg_cast из объектов и комнат.

08.08.2010 Krodo
	Воткнут тип предмета бинт, вес = кол-во применений, val0 - сколько лечит
в секунду (примерно 10 секунд использование).
из анонсов копипаст:
- различаются бинты только по кол-ву восстанавливаемых жизней за применение
- одно применение идет примерно 10 секунд, т.е. набрали 'перевязать' и никуда
ни за кем не ходим пока нам не написало об окончании перевязки
- после этого нельзя перевязывать в течении минуты
- перевязывать можно только вне боя
- при осмотре бинта пишут оставшееся кол-во его применений и примерно хп за раз
- в данный момент бинты идут такие: 50-100-200-400-800-1600 хп
- торговцы пока лоадятся один раз в ребут на рентах городов и ходят
- перевязывать можно только себя, т.е. никаких аргументов у команды нет
- чармисы пользовать не могут
Перемещающиеся торговцы из новой системы магазинов, в файлах зон не светятся.
update:
	Немного измененые циферки в расчете хитролов + при верхних кубиках дайсрола
у мобов/чармисов воткнуты 4 частичных по силе удара 75/50/33/25% дамага.
Мессаги частичных ударов пока убраны, по-моему только лишний спам в бою.

07.08.2010 Svent
	Добавлен показ умений на предмете по vstat, добавлен синоним к команде
"зона" и поправлено чуток опечаток.

05.08.2010 Krodo
	В камнепаде расход уровня на цель до 8 уменьшен, чтобы выдавали 3 цели
при текущей системе подсчета без остатков.
update:
	В масс кастах пвп воткнуто снижение каста (по идее минусы по касту тож
должны нормально работать) на 9% за каждую цель. Версия грубоватая, надеюсь
когда-нить перевоткну без изменений самого поля, пока влом.
	Временно родные хитролы моба выставлены равными его уровню, само поле
остается и не меняется, просто пока не используется.
	У мобов убран штраф на хитролы от осторожного стиля.

05.08.2010 Видолюб
	Мобам воткнуто поглощение физ. урона (0-100), в олц в доп. параметрах.

31.07.2010 Krodo
	С тела убрана для интереса планка в 50, родное и одеваемое. Из-за чего
немного поменялись цифры в формулах, где бралось табличное значение.
GET_CON, GET_CON_ADD - внутри гетеры.
	Доработан глобал-дроп, в который щас сунуты основные 9 сетов. Дропнуться
может по принципу свитка с таймером, но с учетом макса в мире на самой шмотке
(для указанных сетов оно поправлено, но вообще всегда проверять надо на новых).
Дропаться теперь может и с мобов без трупа, как с сетинами вобщем.
	Номера камней, доступных для вплавки воткнуты до 917, потому что иначе
как-то сложно получается в магазине стекло продать, которое будет работать.
	Патч Видолюба, чтобы в !диз нельзя было запаять !диз и запороть слот.

25.07.2010 Krodo
	Зафиксено оседлание/чарм/оживление/нанимание для продавцов, ну и все это
терь в виде функции для пихания в олц магазинов и мобов, а не тока рентерам.
	Туда же отмена плюсования денег мобам при продаже от Видолюба.
update:
	В хранах под ингры зафиксено, чтобы мобы не брали через моб-активити,
до кучи в них нельзя класть руны или что там еще под тот же тип подпадает.

03.07.2010 Видолюб
	Патч возвращает куны когда купец отпускает чармиса через рассчитать
или при креше.
	При выводе мема через зауч после свободных кругов добавляется \r\n во
избежание слипания строк на подобии: 1- 0   2- 0   3- 0  Карл громко икнул.
	Показ аффектов и доп.свойств на базаре не только резных запястий, но
и широких серебряных обручей.

02.07.2010 Ориста
	Добавлена команда 'зона' - пишет название текущей зоны. Если выход ведет
в другую зону, то в автовыходах такой выход отображается большой буквой.
От редактора: кстати уникальность названий зон никто не гарантирует и как
будут другие мапперы глотать автовыход с большой буквы я тоже не уверен.

02.07.2010 Krodo
	Тема с дамролами/уроном по результатам дискуссии в оффтопе убрана.

30.06.2010 Krodo
	В планках дамов/пушек уровень, до которого они работают привязан к
допустимой разнице в группе (30 - разница), т.е. 25 по дефолту и дальше
там у кого как по мортам.

29.06.2010 Krodo
	Была проба пера на тему скорости мортов:
одетые +дамролы и бонус дамролов с одетой/влитой славы капятся на левел*2,
бонус от родной силы, накидываемой ремами плюсуется как обычно.
у пушек среднее капится у луков с 4 до 14, у остальных с 6 до 20 равномерно
по 25 уровень чара включительно. По 'счет все' вроде отражается, чармисов
пока не трогает, богатырей с перчами в части пушек тоже.
	Изменен штраф по экспе за разницу уровней в группе выше допустимой,
к базовым 50% дополнительно накидывается по 2% за каждый уровень сверх
допустимого диапазона, т.е. для неморченного чара 10 уровня в группе с 30м
уровнем штраф будет (30-10-5) * 2 + 50 = 80% (в случае штрафа лидерство не
проверяется).

24.06.2010 Krodo
	В расчет бэтл-экспы воткнут учет максимальной экспы, получаемой чаром за
раз. В данном случае это ограничение (если оно сработало) приравнивается к
полному хп моба и дальше по мере нанесения дамага капает пропорционально.
На самом деле заметно будет только на низких уровнях, потому что там разница
с фактической экспой за самого моба и его батлой иногда в разы получается.

22.06.2010 Krodo
	Воткнут отдельный лог по ремортам/левел-апам/киллу мобов. Статистика по
рунам пишется в сислог раз в час как и остальные.

20.06.2010 Krodo
	В крафте луков зафиксена тема с не изменением суммарного переносимого чаром
веса при нехватке ингра и его экстракте, до кучи в мессаге исчезания лука из-за
макса в мире подправлен кривой дубль строки.
	Кодеру воткнута статистика использования рун по внумам за ребут.

19.06.2010 Krodo
	Минимальная тестовая версия магазинов, включающая славу в виде ценника.
К зонам никак кроме спешиала на мобе не привязано. Правки через олц пока нет и
не факт, что вообще будет, т.к. есть лоад/релоад кофига с нормальным описанием
ошибок в сислог и иммлог. Покупок/ремонтов пока нет, зато есть опознавание.
В случае со славой сначала тратится временная, если есть, потом постоянная.
Конфиг класть в plrstuff/shop/test.xml, пример есть в начале shop_ext.cpp,
релоад через 'reload shop'. Опознавание через 'опознать имя/номер шмотки'.
В конфиге пока type=1 - магаз славы, type=0 - обычный магаз. Шмотки все анлим.
update:
	Добавлена опция 'слава2 перевести <имя> <кол-во>' для перевода свободной
постоянной славы между чарами с одинаковым мылом. Комис за перевод 5% или 50
славы минимум, перевод отражается в карме у обоих + пишется в отдельный лог,
в который до кучи пишутся покупки за славу в магазах.
	Заодно в show stat выведена статистика по общей потраченной славе в магазах
(включая временную) и потраченных с ребута кун в новых магазах.
	В магазах теллы продавца переделаны на send_to_char, чтобы невидимым и
прочим в режимах/аффектах выводилось все корректно.
update2:
	Воткнут флаг !фейл для книг со всякими заклами/скилами/рецептами/апами,
купленными в магазе за славу. Ну и так его в принципе ставить можно через олц,
зовется там 'успех при изучении' в экстрафлагах.
	Напосмотреть изменены лимиты максимальной экспы, получаемой за раз.
Вообще, насколько я понял, если отбросить неиспользуемый кусок с exp_modifier
и кусок формулы, дающий в итоге всегда ноль - планка была левел/10 при любом
реме, т.е. минимум 10 мобов. Сейчас идет левел/(10+ремы), т.е. на 5м реморте
надо минимум 15 мобов, на 10м -> 20.
	Зафиксены скобки в mredit (by Prool), хотя очевидно, что командой никто
никогда не пользовался, иначе бы уже давно зафиксили, т.к. в том виде она была
просто нерабочей. Что она там сейчас редактирует и насколько соответствует
текущим рецептам понятия не имею, пользоваться имх вообще не рекомендуется. Ж)

10.06.2010 Krodo
	Небольшие доработки по славе2: сунута краткая инфа в 'show stats' иммам,
собирается и сохраняется для статистики списанная в виде комиса слава, заодно
на всякий случай сверяется слава до и после олц, отказ имму в изменении славы
у персонажа, редактирующего ее у себя в данный момент.
	Доска ошибок доступна для чтения в том числе при наличии группы olc в
привилегиях.
	Зафиксено вроде на счет смерти от чармисов в 'моястатистика'.
	При перевоплощении и пропадании в пустоте автоматом удаляется рунная метка.
	По 'клан стат' пишется профа чара, если он онлайн.

09.06.2010 Krodo
	Воткнута тестовая версия славы, без таймеров и пока с названием слава2.
Т.е. предполагается, что потестив мне кто-то родит нормальные ограничения и
название имму/игроку (или что-то для старой славы, чтобы подменить ее).
	Выдается/забирается через 'glory2' (без параметров - справка). Вливается
через 'слава2'. Пока там стоит прогрессия по +200 за каждый следующий стат и
комис в виде 10% за вынимание из уже влитого стата. В самом олц: справа цена за
следующий +стат, слева кол-во славы, которое будет возвращено при вынимании из
стата. Соответственно если вынимают/вливают туда-сюда за одно редактирование в
олц, то комис многократно не возьмется. Переливать вложенную славу нельзя, т.е.
предполагается, что чар вынимает влитую славу, а потом уже кому-то шлет.
На счет переливания - я ее воткнул самому чару, но тут есть проблема, что надо
куда-то писать об этом, или в лог славы, или в карму, иначе потом хер найдешь
откуда на чаре слава. Но если так делать, но нужен тоже какой-то комис, чтобы
не заспамили это все => пока у чара переливание отрублено, иммом через +/-.
	На счет сейва/лоада: пользуется pugixml, сходив на страничку автора того
парсера, который тут втыкали как-то давно - меня чес говоря улыбнуло... не
вижу никакого резона кому-то там что-то куда-то писать, чтобы получить сорцы и
описание на мыло, а так я даже не в курсе, как там в этом парсере файл создать.
Pugixml в этом плане по-моему проект более здоровый и надежный, при этом +200кб
кода не роляет. Для long правда подправил его сорцы, чтобы без лишнего кода
писать, там внутри всеравно все через sprintf идет.

05.06.2010 Krodo
	Зафиксена правка клан привилегий, чтобы после нулевого пункта и ребута
звание не выходило с полным набором привилегий.

04.06.2010 Krodo
	В 'клан информация' и 'дметр' воткнут вывод чисел с разделителем тысяч,
до кучи там список приписанных к замку идет с делением по строкам, потому что
у товарисчей из рсп от обилия чаров в одну строку падает жаба.
	Убрана замена двойного амперсанда на один через анси цвета, про последствия
честно говоря не уверен, но вроде ничего сломаться не должно.

01.06.2010 Krodo
	На тему рент: в замках мертвых кланов спешиалы вообще отключаются, потому
что еще магазы с клан-стафом и все такое.

31.05.2010 Krodo
	Вобщем по клан-экспе с началом следующего месяца будет нужная выборка, по
случаю чего нарисовано убивание неактивного клана. При убивании клана его банк
перекидывается на воеводу (если он есть). В 'клан статистике' терь выводится
история за 3 месяца, чтобы можно было оценивать перспективы своей дружины.
	При входе чара в игру в комнате с флагом 'замок' проверяется является ли
она частью замка живого клана. Если клан мертвый - идем в родовую.
	При удалении клана на доску билдерам генерится сообщение с указанием
названия клана и номером зоны замка (если вдруг выходы надумает кто править).

23.05.2010 Krodo
	Воткнут отдельный клан-хран под ингредиенты. Вместимость = основному храну.
Ставится/перемещается/убирается через клан привилегии воеводой. Стоит 1к/день.
Класть можно только ингры всякие (их 3 типа каких-то). В клан-канал не спамит.
Смотреть/класть/брать может любой член дружины без отдельной привилегии.
Ставить хран можно только внутри зоны клан-замка.
	Цена ренты шмоток в основном хране с 50 базовых процентов накинута до 75,
в хране под ингры цена 100%, потому что всеравно по 1 куне все.

17.05.2010 Polud
	Несколько мелких фиксов, упомянутых на багтрекере, как-то:
	1. Подсказка по падежам в medit.
	2. Убирание лага у моба если он следует за кем-то.
	3. Одевание мобов из триггеров (из DGScript будут работать команды "надеть" и "вооружиться").
	4. Убийство мобов в ЗБ ядом.

16.05.2010 Krodo
	Фикс в force тригах (кроме 'mforce all') - учитываются мобы выше 30 уровня.

04.05.2010 Krodo
	Еще одна (последняя) попытка выехать на минимальных изменениях. =)
Вобщем минимальные сависы у мобов выше 30 уровня стали не такими уж и
минимальными: 10 на 31 и дальше по +4 за уровень. Каждые 10 сависов дают 1%
фейла любой фигни, которая дергает их проверку через general_savingthrow().
	По 'счет все' сависы разделены на две цифры: бонус от стата + собственно
одетые сависы, чтобы можно было оценить этот самый процент фейла (потому что
бонус со статов в этой теме не участвует).
	У черноков в поднимании зафиксены уровни для соответствия изменениям.

03.05.2010 Krodo
	Вобщем рандом фейлы баша, трипа и молота откатываются, бум с сависами
глобально разбираться на чарах и мобах.

02.05.2010 Krodo
	Стата зон по экспе воткнута, аналогично кунам.
	Тестовая попытка проставить мобам адекватные уровни по их экспе. При этом
опять же для тесту уровням выше 30 ставятся минимальные сависы (это которые
воля, здоровье, стойкость, реакция). Без жести, (левел-30)*2 и только если у
моба уже не проставлено что-то большее, в основном касается мобов с нулевыми
сависами, чтобы был какой-то минимум.
	У шока как альтернатива отсутствию реакции у мобов вместо 3х целей воткнут
рандом 1..3.

01.05.2010 Krodo
	Подправлен вывод удачи по 'счет все', чтобы выводило то, что участвует в
реальных расчетах, воткнуто через ch->calc_morale().
	Баш в плане сависов воткнут по старому варианту, добавлено по 5% шансов
фейла в баш и трип, 7% молот, оглуш как и был 15%. Про сависы нужна нехилая
подготовительная работа...
	В MAG_AREAS заклах подправлен расчет кол-ва целей, чтобы не бить неполным
оставшимся уровнем по лишней целе.
	В тригах отключен пурж без аргумента.

28.04.2010 Krodo
	Кодеру воткнута статистика клановой истории экспы за нужное кол-во месяцев.

25.04.2010 Krodo
	У огнехранов подправлена зависимость хп и дамага от хари (в целом до х2).
При уходе хп любого согрупника во время боя в ноль или ниже - вместо него умирает
ангел-хранитель, исцеляя согрупника на половину его хп или просто до 300.

24.04.2010 Krodo
	Зафиксен креш на предметах без прототипов при оценке в магазине (в основном
клан-магазы, в которых для верности воткнуты все типы для покупки).

18.04.2010 Svent
	Залил тестовую версию навороченного аффекта.

11.04.2010 Krodo
	У баша в коде проставлено 200 макс скила, по идее может ощутимо сказаться
при высчитывании шанса резиста у жертвы. Воткнута своя процентовка по скилу,
прохождение максимум 96%. Учитываемый вес щита ограничен 35, на всякий.
	У точного стиля, где шло умножение дамага на скилл - воткнуто скилл/2, но
т.к. таких мест на общем фоне множителей мало - особо не решает, разминочно.
	В базовый расчет дамаги чармиса в раунд воткнут учет аффекта облака стрел.

07.04.2010 Krodo
	Родные дамролы у мобов вобщем тоже переделаны и убран ограничитель в 50,
щас родные ставятся до 50000 + с одежды сколько получится без ограничения.
	Воткнута статистика дропа кун по зонам, пока крайне грубая (для себя).

05.04.2010 Krodo
	Поле aц у мобов воткнуто как short int, потому что прописать -300 ац в
поле с диапазоном -128...+127 не получится. Причем в олц еще стоял лимитатор
на -200, которые один фик прописать нельзя. А даж если и прописать через
редактор/файл - при лоаде в маде ес-сно будет полная лажа и при первом же
пересохранении зоны поле будет переписано на что-то левое. Так что кто там
из билдеров ставил у босов в своей зоне жоский ац - не судьба, в данный момент
в зонах нет мобов с родным ац ниже -120, если тока шмотом.
	Все вышесказанное не относится к ац игроков - там все нормально, потому
что под ац со шмота свое поле и оно -300 переваривает.

03.04.2010 Krodo
	Зафиксен креш на умирании моба во время каста через триг, т.к. моб после
каста получает в обратку каст реакшн от целей, после чего в триге дальше в
лучшем случае где-нить вылетает на нулевом указателе.

24.03.2010 Krodo
	Зафиксен креш на попытке редактирования через олц комнаты с активными
аффектами, типа той же печати.

21.03.2010 Svent
	Пофиксил оверкаст масскастов с посохов. В мирке вроде теперь тоже не
кастится. А вообще там муть мутная.

18.03.2010 Krodo
	Пока отключены оба name_list, вернусь к этой теме попозже.

18.03.2010 Рогмир
	Исправил косяк с запретом реска чармисом кого-либо не в группе. Строки
аффектов комнат будут идти после автовыходов (иначе ломается маппер).

17.03.2010 Svent
	Поправил небольшую опечатку в коде.

16.03.2010 Krodo
	В hitprcnt_mtrigger воткнута проверка на спурженного моба, т.к. есть
прецендент с крешем. Заодно там рядом какие мтриги под руку попались с
проверками вида !ch - тоже доработано под пурж. Вообще при случае надо будет
по ним пройтись на эту тему, раз уж щас имеем возможность проверять.

14.03.2010 Krodo
	С голдой у чаров вобщем переделано основательно, тема такая: участвуют
только положительные числа, если надо прибавить голды: ch->add_gold(число),
если отнять: ch->remove_gold(число), с банком тоже самое add/remove_bank.
Если надо сразу вычесть из банка, а при нехватке в нем и из рук, то есть
ch->remove_both_gold(число). Все функции remove возвращают остаток, если
на указанном счете не хватило денег для снятия. Ниже нуля никто не сетит, это
надо иметь в виду при всяких проверках переполнений. Максимум денег у чара
воткнуто в 1000000000, на руках и в банке отдельно. Логирование тоже слегка
подредактировано, во-первых чтобы не спамить при снятии/вложении в банк,
во-вторых чтобы писать реально снятые деньги в случае попытки минуснуть сумму
больше самого счета.

13.03.2010 Krodo
	GET_CLASS() -> get_class(), set_class(). Само поле терь short int, потому
что это удобнее char с кучей (int) в массивах. GET_LEVEL() -> get_level(),
set_level(), с типом тоже самое. GET_IDNUM() -> get_idnum(), set_idnum().
GET_UNIQUE() -> get_uid(), set_uid(). GET_EXP() -> get_exp(), set_exp().
GET_REMORT() -> get_remort(), set_remort(). LAST_LOGON() -> get_last_logon(),
set_last_logon(). Пока xxx_gold()/xxx_bank_gold() не убраны, но ссылаются на
одноименные методы чардаты, сами поля gold_ и bank_gold_ уже приватные.

12.03.2010 Krodo
	В почту воткнута команда 'вернуть' - пихает назад все посылки, которые еще
не дошли до получателей и удерживает половину остатка от резервируемых денег.

08.03.2010 Krodo
	В отравить зафиксено изменение веса контейнера с ядом.
	Воткнут сбор статистики по экспе, набранной кланом за каждый месяц без учета
всяких минусов от рипов и прочего. Кол-во учитываемых месяцев неограниченно.
Пока с ней ничо не делается, но при наличии некоторой выборки будет воткнута
система, убивающая неактивные кланы.

07.03.2010 Krodo
	В zone_data добавлено поле комментария (под авторов/даты создания, которых в
названии зоны быть по-хорошему не должно) и флаг 'для группы' пока ничего не
делающий, все проставляется через zedit. Формат зон-файла с каждым разом становится
все смешнее. =)
	Локаль пока убрана под TEST_BUILD.
	В обж-триги добавлено поле %owner% - вобщем-то щас в коде поле используется
для перековки, содержит уид чара. Пользовать как-то так:

if (!%self.owner%)
  %echo% Поле пустое.
end

%self.owner(%actor.uniq%)%

if (%self.owner% == %actor.uniq%)
  %echo% Овнер совпал.
end
	Туда же добавлен сет %val0..3%, пользовать тока надо с умом и ознакомившись
c содержимым этих полей в коде под каждый конкретный тип предмета, иначе гг.
Сетить так: %self.val3(555)%
	Воткнута обратно работа флагов запрета христианам и язычникам, т.е. чтобы
брать не могли шмотку.
	В дпс воткнут вывод статистики указанного персонажа кодеру.
	Зафиксен левый вывод в клетку строки из триг-лога при отпирании предмета, на
котором этот самый триг отпирания висит.
	В Character name и short_descr переделаны на строки и доступны по get_pc_name(),
get_npc_name() и get_name() для выбора из первых двух, вобщем тоже, что и в макросах.
Сами макросы GET_NAME и GET_PC_NAME оставлены. Сеты соответственно через set_...
	В триге 'каст в моба' макс номер каста выкручен в TOP_SPELL_DEFINE, потому что
проходят еще касты со свитков того же опознания.

06.03.2010 Krodo
	У мобов планка хитов воткнута в 10млн (50 по 100к кубиками + 5млн хп бонус).

02.03.2010 Krodo
	В тип трига 'каст в моба' добавлено еще %castname% - собсна русское название
заклинания, которое суется в spell_info.name и везде в маде пользуется, т.е.
if (%castname% == доблесть)
  г Поблесали...
end
	С локалью вроде разобрались, надо LC_CTYPE тока сетить.

28.02.2010 Krodo
	В main воткнут сет ru_RU.KOI8-R локали, т.к. на новом и уже видимо напрочь
юникодном cygwin русский текст выводится с большими проблемами.
	При переводе денег чару оффлайн они терь учитываются и в личных хранах, т.к.
очередная тема для мистических пропаж шмота.
	Добавлен тип трига 'каст в моба', numeric arg - вероятность, в триг идут
%actor% - кастер, %castnum% - номер закла из spells.h (число), юзать как-то так:
if (%castnum% == 57)
  г Заклинание "полет".
end
	Сет локали на сервере закоменчен, потому как глючит - разбираться надо.

27.02.2010 Svent
	Добавил напоминалку о метке и в простой "счет". Также вставил запрет
на оживление мобов с масс атакой, чтоб не абузили.

22.02.2010 Polud
	Разрешил пользоваться релокейтом, находясь в группе или в режиме. Запретил входить в "кровавые"
пенты, если на выходе замок или арена, чтобы не оказывались там в крови.

22.02.2010 Svent
	Добавил в "счет все" напоминалку о поставленной метке.

26.01.2010 Рогмир
	Теперь приказывать спасать можно только тех, кто в группе с владельцем
клонов и прочих чармисов.

04.01.2010 Polud
	Заклинание !переместиться! на цель не в группе и без режима вешает на
кастующего агроБД без флага на 5 минут. За вход в пенту, поставленную по флагу,
на всех входящих, кроме поставившего, с любой стороны пенты вещается
агроБД 5 минут без флага. Такую пенту можно отличить по ее виду в клетке.

28.12.2009 Krodo
	При написании пустого клан сообщения - очищается все это дело, чтобы не
выводить при входе заголовок с пустым телом, а то чет на счет 'очистить' я так
по кланам смотрю далеко не все освоили.

25.12.2009 Krodo
	В загрузку предмета через load_list добавлен сет GET_OBJ_ZONE, т.к. без него
флаг 'рассыпется вне зоны' не работает.
	При варке рецептов терь пишется качество какого конкретно ингредиента ниже
минимально необходимого (случай со снижением требований от прокачки скилла).

24.12.2009 Polud
	Сделал "режим уведомления <цена>" для получения сообщений о проданных
с базара вещах пока продавец был оффлайн. Если цена меньше 100 - уведомления
отключаются. Приходят в виде писем через почтовую систему. Команды базара
'информация', 'характеристики', 'предложения' и 'фильтрация' можно теперь
использовать в любой комнате. Исправил несколько опечаток и удалил две
неиспользовавшиеся функции в shop.cpp: shopping_sell и shopping_value.

23.12.2009 Krodo
	В иммский stat file добавлен сет клановых полей для показа приписки чара.

20.12.2009 Krodo
	Добавлено 'клан сообщение удалить|очистить'.

19.12.2009 Krodo
	Воткнуто message of the day дружины - сообщение, которое вываливается при
каждом входе чара в игру, типа клан-новостей прошлых. Отличия: мессага пишется
через редактор, а не тупо в строку. Ограничение на 77 символов в каждой строке
и 240 символов общей длины. Пишется новое сообщение - старое затирается. Сама
запись вынесена на привилегию, как обычно воевода по умолчанию.
	Добавлена команда 'клан пк' - выводит результаты последних 15 пк с участием
членов данной дружины, дата-кто-кого.

18.12.2009 Krodo
	Возвращаясь к сохранению шмоток и переполнениям буферов: переписан
write_one_object на версию с sstream, без ограничения буфером и printf'ов,
прототип вынесен в objsave.h, потому что уже надоело править прототипы.
Соответственно переписаны куски с рентой шмота и базаром. В базаре попутно
убран exchange_database_savebackup и exchange_write_one_object_new. На счет
сохранения шмоток появилась особенность: поля со всякими byte|sbyte, хранящие
внутри числа - в поток будут писаться символом, вместо каста типов предлагается
бросать эти традиции и писать где надо int или еще что подходящее по смыслу.
	В клан статистику воткнут уровень игроков, пока для тех, кто онлайн, для
оффлайна ес-сно тож можно будет сделать, если тема приживется. Иммов не пишет.
	Во вспом все терь пишется канал богов (по заявкам).
	Зафиксен креш в магазинах при замене через олц продавца на того же самого.
Умирало на рекурсии в спешиале продавца, потому что в олц в этом случае старый
спешиал зашивается под видом дополнительного.

08.12.2009 Svent
	Добавлена возможность выбора новгородских или киевских родовых при создании
нового персонажа и при перевоплощении. А вобще внумы комнат прямым текстом
в коде - бред. Надо все это в файлы выносить.

08.12.2009 Рогмир
	Теперь после смерти моба, если у него что-то есть в инве/экипе будут
показываться строчки вроде "На земле осталась лежать кольчуга." По идее,
это должно происходить не только после смерти, а при пурже  всяких
двойников, но, думаю, в этом нет ничего плохого.

28.11.2009 Krodo
	Зафиксен креш с длинным письмом при его авто-сейве у чара в маде, когда
кроме него шмоток больше нет и соотв-но нет запаса буфера, там канеш надо с
буффером это все переделывать, но как раз седня желания опять стало ноль,
поэтому пока тупо буффер увеличен на макс. длину письма, память валить не
будет и пойдет.

28.11.2009 Василиса
	Добавила команду МОЯСТАТИСТИКА (ACMD(my_stat) в act.informative). Команда
отображает количество смертей персонажа и слитую экспу отдельно по причинам
смерти. Выводится статистика по текущему морту и за все морты целиком. Также
есть статистика по выигранным и проигранным боям на арене.

27.11.2009 Krodo
	У плеера воткнуты флаги для одноразовых событий, в данном случае чтобы не
выводить больше одного раза чару мессагу про оффтоп и не включать его заново на
в случаях делевелов. У реморченных тоже первый раз включит на 6м уровне для
цельности картины. (get_disposable_flag/set_disposable_flag)
	Попутно в Player перенесены save_char() и load_char_ascii(), терь соотв-но
да варианта - грузим нормально плеера, или не грузим ничего, если на входе нам
подсунули моба, без всяких частичных случаев. Ну и не надо терь париться с
методами save/load у нетривиальных private полей.
	В 'появиться' добавлена проверка на хайд.
update: оказывается нужен был сник, но и хайд так то нужен, потому что внутри
снимаются все 4 флага, а проверка только на два из них, и по уму сама команда
должна быть не выбивающей из хайда, т.к. вылетают сразу обе мессаги: прекратил
прятаться и вы и так видимы.

26.11.2009 Krodo
	Воткнуто некоторое подобие спам-контроля, пока тока на канал оффтопа. По
такому случаю из самого оффтопа убран лаг при сообщении, в целом от одного чара
должно быть не чаще 1 мессаги в 2 секунды, не более 10 сообщений подряд и не
более 15 сообщений из последних 31 (на грамотный спам надо 3 чара).
У нового чара при получении 6 уровня канал включается автоматом и выводится
заметная глазу мессага, уведомляющая о включении и отсылающая к справке, сама
справка тоже добавлена.
update: мин. время между мессагами на 1 перевоткнуто, на % мессаг за последние
х сообщений сверху довернуто время между первой и последней мессагой, пока что
из расчета 15 мессаг за 45 секунд, т.е. если между мессагами зазор больше, то
даст писать даже если уже есть 15 из 31, в сообщение блокировки добавлен свой
текст на каждый ее вид, чтобы было понятнее чего к чему.

22.11.2009 Krodo
	Переделана концентрация силы (название бы ей кстати адекватное придумать),
знач она сейчас не плюсует какой-то свой высчитанный дамаг, а рассчитывает
множитель для кубиков пушки, ну и зависимости силы/левела слегка сдвинуты.
В ковку добавлен +1 на кубики, поэтому при макс. весе заготовок и 50 силы чара
для пушек - можно сковать 31.5 прайм и 24 офф. Ну и на сете ВВ при активации
воткнуты прайму теже +3.5ср и оффу +3ср. До кучи часть дамага смещена на глуш,
в котором по +1 пошло на мин. множители дамага и скорее косметические +1.5% на
прохождение. В целом дамаг должен слегка уменьшиться.

21.11.2009 Krodo
	Слегка разобрана hit(), хотя она все еще остается абсолютно невменяемой по
размерам и логике кода, вроде сломаться ничо не должно пока. Заодно там убран
макрос EXPERT_WEAPON, который давно уже не работал и подправлен бонус хитролов
на глуш и молот, который тож не работал изначально. В improove_skill воткнута
проверка на 200 скила, во избежание.

16.11.2009 Krodo
	Зафиксен креш на отложенных скриптах с пуржем моба-хозяина трига, из
которого сам триг и был запущен. Ну вообще это я не доглядел, когда проверку на
экстракт моба там втыкал, есть такое.

11.11.2009 Krodo
	При старте мада ограничение на 98 комнат в зоне перевоткнуто на 99, т.к. их
можно столько создать через олц и нумерация начинается с нуля - для виртуалки
остается еще место.

09.11.2009 Krodo
	Короче пока есть мысль сохранять у моба указатель на player_specials, потому
что он у них никогда при экстракте не обнулялся и код к этому оказался явно не
готов, выдав 3 креша за сутки в разных местах. Оно канеш эффективно, но есть в
этом какой-то садизм по отношению к игроку. Ж) А указатель этот всеравно рано
или поздно из чар-даты исчезнет, смысла за него щас биться имх никакого.
	Зафиксен двойной экстракт последователей в иммском purge, заодно зафиксен
креш на нулевом имени в extract_char.

08.11.2009 Krodo
	Знач с удалением чаров/мобов на пробу тема такая: при экстракте очищаем все
поля и выделенную память, оставляя саму оболочку чар-даты с нулями внутри и
поднятым флагом purged(). Из всех списков он как обычно удаляется, спурженный
указатель остается только в своем списке, реальная очистка которого идет тупо
раз в минуту. Т.е. спуржив чара и попытавшись дальше в коде к нему обращаться
мы имеем по крайней мерее предсказуемое поведение и можем в любой момент его
проверить на ch->purged(). Плюс ко всему по мере переписывания макросов на
методы имеем возможность в каждом методе проверять на корректность чар-даты и
спамить соответствующие мессаги в сислог.
	Помимо того, что было зафиксено на основании вчерашнего прогона - зафиксено
обращение к мобу после пуржа в cast_reaction.

07.11.2009 Krodo
	Вобщем do_aggressive_mob переделана на агро конкретного моба, чек агро всей
комнаты вынесен в do_aggressive_room, который дергается при мувах/сбеганиях.
Проблема как обычно в том, что после do_aggressive_mob уже мог быть спуржен сам
чар-инициатор прохода по комнате. До кучи во время самого прохода запоминался
next_in_room, который тоже мог быть спуржен в теле цикла. Вобщем костыли, но чо
с этим глобально делать пока не ясно.
	В ok_shop_room вместо нуля воткнута проверка на -1, вроде так должно быть.

06.11.2009 Krodo
	Знач экстра-описания пока откладываются на додумку чо с ними делать (кстати
сейчас на предмете экстра-описание не сработает, если у него нет соответствующего
алиаса, пара предметов, взятых на удачу, такими и оказались, даж не знаю в курсе
ли об этом билдеры, речь о предметах с двумя и более экстра-описаниями).
Из прошлого патча накачено обратно ограничение на клановые звания + фикс
неинициализированных переменных в diskio.
	В eval_op зафиксено чтение переменной при уходе за пределы строки (я б еще
долго втыкал че ему надо, если бы Al не разжевал).
	В get_number, half_chop и find_all_dots зафиксена крайне мутная strcpy с
пересекающимися интервалами.
	Заодно воткнут код strl_cpy (бсдшная strlcpy), как замена strncpy и strcpy
(в перспективе), т.к. на центосе ее не обнаружилось.

01.11.2009 Svent
	Поправил вероятность прохождения !шока!, а то волхвы охамели несколько с ним.

31.10.2009 Krodo
	Зафиксен креш на базаре при выводе слишком длинного фильтра, т.к. при выводе
предложений нет никаких проверок длины получившейся строки временного фильтра.
	Для потомков: если щас по death тригу у моба убить его убийцу, то с немалой
вероятностью получим в коде где-нить во время экстра-атак например невалидный
указатель атакующего. Как нормально и железно для всех случаев решить проблему
и при этом не умереть от кол-ва переписываемого кода - вопрос открытый.
	olc_data воткнута на new/delete с конструктором.

26.10.2009 Krodo
	В обкасте шмота учтено снятие флагов со шмотки в любом случае, а не только
пока оно у чара онлайн. До кучи учтено наличие этих флагов у прототипа шмотки,
т.е. чтобы не снять лишнего после спадания каста, при новом обкасте старый
удаляется по полной программе. А вообще как обычно из нормального кода все
превращается в какую-то херню тока потому, что вместо проверки на наличие
обкаста решено было просетить на стафину аффекты (что может и логично, но только
в случае написания с нуля, а не адаптации имеющегося, в котором это не заложено).

25.10.2009 Krodo
	Вынесена в свой файл room_data (room.cpp/hpp), вместо мемсета нулей воткнут
конструтор, вроде терь везде по коду создается/удаляется через new/delete.
	В vnum_flag() alloc/realloc переписано на string.

24.10.2009 Krodo
	Переделан обкаст шмота, помимо более простого кода терь таймер каста идет
в ренте/хране/почте, timed_spell вынесен в свой класс (obj.spell.cpp), попутно
в obj.cpp/hpp вынесена obj_data и что там попалось под руку около нее.
Макрос GET_OBJ_TIMER(obj) переписан на get_timer()/set_timer() и dec_timer(),
последний реализует реальное старение шмотки (в маде, ренте, почте, хранах) и
одновременно снимает таймер самой шмотки и ее обкаста.
	Список сражающихся пока воткнут старым вариантом, в принципе есть мысли,
что там может быть не так, но надо бы убедиться, что в нем вообще дело.

23.10.2009 Рогмир
	Добавлена возможность выставлять сетам +умения. Умения, выставленные в сете
перетирают дефолтные умения, которые дает предмет. Например:
Vnum: 68815 ;длинное копье
	Oqty: 5
		Clss: 3 5 9 11
	    Amsg: &YДлинное копье ярко вспыхнуло солнечным светом и угасло.&n
	    Dmsg: &yДлинное копье тускло засветилось и медленно погасло.&n
	    Ramg: &YКопье $n1 ярко вспыхнуло солнечным светом и угасло.&n
	    Rdmg: &yКопье $n1 тускло засветилось и погасло.&n
	    Afcn: 1 10
	    Afcn: 2 10
	    Skll: 23 100
Такое копье после активации будет давать +100 опознания. Отрицательные числа
допустимы.

11.10.2009 Krodo
	Добавлен список мыл, чьи хозяева будут обламываться за 'оффтоп', как будто
оно и не работает, в том числе на 'вспомнить' и теллы других игроков в канал.
Релоадится при желании через 'reload offtop' - misc/offtop.lst.
В принципе кандидатов в список только двое. Ж)
	В timed_spell воткнут полет, т.е. можно флаить шмотки. При этом на шмотку
ставятся флаги 'летит' и 'не тонет'. Каст висит 3 дня, таймер виден при осмотре.
	Убрано free_db(), free_rooms() - я не знаю зачем оно было нужно, да еще и
через free вместо delete.

10.10.2009 Svent
	Увеличил время действия "разбитых оков", поменял действие "шока" с
навешивания глухоты на оглушение.

10.10.2009 Krodo
	Вроде зафиксен завал в списке алиасов при трансформе шмотки/моба, заодно
там переписано кой-чего для верности. Воткнуто обновление при редактировании
через олц, до кучи в олц воткнуло сохранение флага списка сражающихся, да и
чет там херня какая-то на тему сохранения полей при обновлении из прототипа.

03.10.2009 Krodo
	Глобал дроп переделан в плане расчета вероятности дропа, цифра шанса сейчас
соответствует порядковому номеру убитого моба, который собсна и дропнет. Кол-во
убитых сохраняется между ребутами. Онлайн статистика по убитым убрана на всякий.
Заодно воткнут релоад всего этого дела.

02.10.2009 Krodo
	В иммский 'hcontrol' добавлены 'title' и 'rank'. Первое для смены клановой
аббревиатуры в строке титула чара. Второе для изменения существующего звания
без копания в файле клана. Формат команд выдается по пустому 'hcontrol'. Звания
конвертятся в нижний регистр. Изменения сразу отражаются у всех клановых чаров,
находящихся онлайн. В клан добавлено поле титульной аббревиатуры для женского
рода, по дефолту такое же, как и старое поле title. При создании клана терь
не требуется поле титула, по дефолту титул = короткой аббревиатуре.
	Зафиксена бага со шмотками +скилл, оставляющая скилл на чаре при делеве.
До кучи аффект яда из get_trained_skill() вынесен в get_skill(), чтобы случайно
не засейвить его чару.

29.09.2009 Krodo
	В create_obj при создании трупа терь идет его алиас, чтобы оно искалось
через ObjectAlias. В принципе аналогичная тема есть для останков с арены,
посылок, кучек кун и писем, но пока не придумалось зачем они там нужны.
	В 'статус' добавлена опция 'к' - показывает в строке статуса кол-во
доступных кличей у батыра, по дефолту выключено.

27.09.2009 Krodo
	Закинуты потестить кличи, пока тока защитные - 'справка клич'.
По вопросам кличей вообще - к вьюге, хотя по прошествии времени он их тоже
уже видит как в первый раз.

26.09.2009 Krodo
	При варке рецептов терь учитывается минимальное качество ингров, которое
воткнуто как REQ рецепта/2, т.е. насколько бы ни был прокачен рецепт, ниже
чем в два раза требования к силе входящих в него ингров не упадут.

25.09.2009 Krodo
	Доработан поиск цели для каста локейта. Основной поиск идет не по списку
предметов, а через ObjectList, который для тригов был воткнут не так давно.
Плюс идет поиск по личным хранилищам и почте, т.к. их предметы вне общего
списка из-за чего было смущающее народ поведение, когда по одной части слова
предмет локейтится в личном хране, а по другой нет (в зависимости от совпадения
с каким-нить алиасом предмета из общего списка).
	Переделан CharacterList/ObjectList (заодно переименовано в CharacterAlias
и ObjectAlias соответственно), ищет теперь ишо быстрее и без лишних аллокаций.
	При ренте больше 500 предметов пишет сколько их сейчас у чара. На самом
деле это ограничение вроде бы не актуально в плане пропажи предметов, но и
убирать тож смысла нет, т.к. вход/выход чара с парой-тройкой тыщ предметов в
инвентаре тема в плане лагов не очень.
	Зафиксено ломание пушки при агре на шопкипера, до кучи там же проверяется
на дамаг-триггер у моба, не уверен правда надо ли оно, но по идее надо.
	Доработан трансфер славы, чтобы по возможности перекидывать и вложенные
статы (до 10 суммарных ес-сно, остальное пропадает).

23.09.2009 Krodo
	Переделан расчет раундов в дпсе, вообще система уже другая получилась,
лучше или хуже пока не ясно, но кода стало поменьше. Полноценным раундом
сейчас считается в том числе первый удар в начале боя, время уже нигде не
засекается. Добавлено поле слитой экспы, чтобы не минусовать ее из набранной,
т.к. есть еще и часть набранной от ударов, что минусовать у нее хз. А так
подбивается баланс набранной/слитой и вроде все счастливы.

20.09.2009 Krodo
	Как-то фиксился креш в mag_areas на пурже клонов за умершим хозяином,
зафиксена таже механика в mag_masses, и на всякий случай в mag_groups, хотя
в групповых вроде из дамагающих ничего нет.
	Для морталов по 'вспом воззвать' терь выводится их общение с тронным.

19.09.2009 Krodo
	В дпсе добавлен максимальный урон за раунд, статистика экспы и бэтл-экспы,
расписан по процентам дамаг в группе, зафиксена пара моментов с лидером, поле
с именем уменьшено до 25 с обрезанием лишнего.
	Зафиксен креш на кормежке поднятого моба трупом игрока.

18.09.2009 Krodo
	В %date% переименовано 'day-year' -> 'yday' из-за специфики подстановки
переменных, терь будет работать конструкция типа:
if %date.yday% == %actor.getquest(4000)%
%echo% Сегодня уже делал квест.
end
	Туда же добавлено %date.wday% - пишет номер дня недели, 0 = воскресенье,
1 = понедельник и т.д. до 6, например:
if %date.wday% == 5
  %echo% Пятнецо!
end

17.09.2009 Krodo
	В триги добавлена команда %date.XXX%, формат следующий:
%date.unix% - юниксовый формат (число секуд с 1970 года)
%date.day-year% - порядковый номер дня в году (1-366)
%date.minute%, %date.hour%, %date.day%, %date.month%, %date.year% - это все и
так понятно, везде в виде чисел десятичных.
Мое видение использования первых двух вещей:
	unix:
%actor.setquest(4000 %date.unix%)%
дальше мы можем проверить насколько давно был этот сет сделан:
eval i %date.unix%
eval k %actor.getquest(4000)%
eval j %i%-%k%
%echo% Метка квеста поставлена %j% секунд назад.
	day-year:
%actor.setquest(4000 %date.day-year%)%
дальше мы можем например проверить, выполнялся ли квест в этот день:
eval i %actor.getquest(4000)%
eval k %date.day-year%
if %i% == %k%
%echo% Сегодня уже делал квест.
end

15.09.2009 Krodo
	Зафиксен креш на двойном удалении поднятых мобов при экстракте, насколько
понимаю, до этого не падало только на везении/фре-животворящей.

14.09.2009 Krodo
	Вместо тестовой воткнута полноценная команда 'дметр', ведется статистика по
нанесенному урону себя, последних пяти своих чармисов и группы, если она есть.
'дметр' - вывод статистики
'дметр очистить' - очистка персональной статистики
'дметр очистить группа' - очистка групповой статистики (только лидер)
Групповая статистика хранится у лидера группы, сама она не чистится, не считая
того же ограничения на пять чармисов, т.е. регруп стату не обнуляет, так же она
передается при смене лидера. Столбцы в статистике - эффективный дамаг, средний
дамаг в раунд, дамаг вошедший по уже мертвому мобу (оверхит). Если моб умирает
с первого удара, т.е. без полноценного раунда - дамаг считается за пол раунда.
Вкраце как-то так, еще будет допиливаться.

12.09.2009 Krodo
	Очередная версия разделения полей моба и плеера, на этот раз через вирт.
функции. Отсюда пара моментов: Player имеет в качестве внешнего интерфейса
только методы, без полей. При добавлении нового метода в Player нужно втыкать
виртуальную функцию в PlayerI, возвращающую (если) что-то осмысленно-пустое для
случая вызова мобом. Конструкция простая - в виде базового класса выступает моб.
Отсюда появляется фишка при создании чара, например что-то вроде:
CHAR_DATA *ch = new CHAR_DATA;
load_char(имя, ch);
надо понимать, что в данном случае чар загрузится без полей Player класса, т.к.
фактически мы пихаем в load_char класс моба, не имеющего необходимых полей.
Т.е. правильно писать: Player *ch = new Player и дальше все без изменений,
или CHAR_DATA *ch = new Player, если дальше по коду нужен Character указатель.
Тема решаема, чтобы ошибиться было нельзя, но вызывающий код пока подождет.

30.08.2009 Polud
	Поправил несколько мелких ошибок: срабатывало и качалось умение
"выследить" после рекола, телепорта и пр. и последующего перемещения
персонажа в "правильном" направлении; сбрасывались врожденные аффекты
чармиса после надевания/снятия вещи с аналогичным аффектом; чармис, однажды
обкастованный "силой" и вооруженный тяжелым оружием, не ронял его после
прекращения действия заклинания.

29.08.2009 Krodo
	Зафиксена запись за пределы строки (падежи) при авто-одобрении.

26.08.2009 Krodo
	Подправлен расчет времени работы триггеров, а то мне там секунда+ на ровном
месте просто мозг выносила.

25.08.2009 Krodo
	Воткнуты мапы мобов/чаров и предметов с сортировкой по алиасам для более
быстрой подстановки переменных в тригах по именам. Необходимость поиска по
неполному совпадению и нескольких слов в разном порядке + возврат первого по
списку моба/объекта внесла свои коррективы, по сути у меня 4 версии одного
и того же кода из-за этих заморочек. Oo Вроде получилось не сильно медленно,
канеш с лучшим случаем для старого поиска, когда моб/предмет оказывался в
начале списка конкурировать не вариант, но дальше все вполне прилично. Для
худших случаев разница в несколько раз, особенно если искомого в списке нет.
Пользуясь случаем передаю привет AL'у, который выдал дельные мысли и советы
по реализации всего этого дела.

22.08.2009 Krodo
	В 'режим автограбеж' добавлена опция, чтобы не лутить ингры. Значит опции
получаются: 'режим автограбеж <без-параметров|все|ингредиенты|нет>'.
Без параметров включает/выключает сам режим, не трогая при этом опцию ингров,
т.е. если был режим без ингров, его выключили через 'реж автограб' и потом снова
включили через 'реж автограб', то он так и останется без ингров и об этом при
включении напишет. А вообще система такая:
включить весь лут - 'реж автограб все'
включить лут без ингров - 'реж автограб ингр'
выключить лут - 'реж автограб нет'
По умолчанию лут ингров включен, состояние автолута в режимах показывается.
Лог моб-киллов пока отключил, в принципе и так статистики вагон.

20.08.2009 Krodo
	Вспомнился тут список сражающихся для быстрого пуржа мобов при резете зон,
который откатился и на место не вернулся. Пока накатывал заодно и переделал его
под более разумный вариант, посмотрим чекаво.

18.08.2009 Krodo
	Если пушку стало тяжело держать в правой руке, но при этом ее можно взять в
обе руки и эти самые обе руки свободны - автоматом так и делается.

15.08.2009 Krodo
	Зафиксен еще выход за границы массива в резистах чара к точке. Я так понял
это автор хотел резистов докидать на точку, но в таком виде там вообще полный
рандом возвращается, т.е. если нужны доп.резисты - надо их отдельно плюсовать.
	Дофиксено с каналами/вспоминаниями, вроде рабочая система уже.

13.08.2009 Krodo
	Для тесту в хедерах, где не требовалось из-за этого менять зависимый код,
вместо сишных массивов воткнут boost::array. По такому случаю сразу зафиксено
три выхода за пределы массива, один из которых правда был почти штатный, но
там в рент-таймерах шмота с этими структурами извратились имх крутовато даже
по меркам сишного кода лихих 90х, поэтому переписано с вырезанием всех этих
MAKESIZE, SAVESIZE и прочих. Еще там мем у мобов вне боя криво из-за этого
работал и у чаров иногда некорректно считались слоты на 10й и выше круги.
	Пока при сборке через make без параметров включен BOOST_ENABLE_ASSERT_HANDLER
и определен boost::assertion_failed(), чтобы его ассерты шли просто в лог, а не
абортили рабочий мад.
update: еще фикс - 50й уровень моба в расовых инграх.

09.08.2009 Krodo
	Допереписано 'вспомнить' - воззвание/оффтоп/болтание/орание. Все это дело
пишется в том числе во 'вспом все' всем заинтересованным онлайн, всключая их
собственные теллы. Пока сомневаюсь, стоит ли пихать группу, т.к. там постоянно
идет левый спам на мувы танка/бафы/точку.

08.08.2009 Krodo
	Добавлено два типа моб-триггеров: 'агродействие' - срабатывает при начале
боя с мобом (до дамага), в numberic arg шансы срабатывания 1-100;
'раунд боя' - срабатывает на указанном в numberic arg раунде боя, начиная с
единицы, шанс ес-сно 100%. В триггеры в качестве %actor% идет сагривший и
атакуемый в данный момент персонаж соответственно.

06.08.2009 Krodo
	Частично переписано 'вспомнить' - личные теллы, клан и алли каналы, все
запоминаемые каналы разом. Добавленные опции: 'вспом гд|гс|все'.
Воткнут 'режим вспомнить <число>' - изменение кол-ва выводимых строк, само
число запоминаемых строк при этом остается всегда 100, т.е. просто выводит
часть из них, если в режиме меньшее число, по умолчанию выводит 15 строк.

05.08.2009 Krodo
	Добавлены в триги %obj.uid% и %obj.skill%.
'uid' - это из системы антиксера, номер предмета, который сохраняется между
ребутами (id, возвращаемый тем же calcuid - это только на ребут). Если предмет
новый (не был у персонажей), то уид проставляется сразу на месте.
'skill' - одноименное поле предмета, возвращает номер, который еще нужно
адекватно обработать для предметов разных типов.
Для пушек цифры будут такие:
"луки" - 154
"короткие лезвия" - 144
"длинные лезвия" - 143
"секиры" - 142
"палицы и дубины" - 141
"иное оружие" - 145
"двуручники" - 146
"проникающее оружие" - 147
"копья и рогатины" - 148
	Воткнут 'режим ингредиенты' - показывать или нет ингредиенты и магические
компоненты в режиме базара, по умолчанию не показываются.
	Добавлена клан-экспа за последние 30 дней, выводится там же, где и полная,
обновляется раз в час, кланы в общем списке сортируются по ней.

04.08.2009 Krodo
	Раз уж с 'calcuidall' обломали за анлим - доработан 'calcuid', которому
последним аргументом можно указать порядковый номер интересующего mob/obj.
Формат соответственно: calcuid <переменная> <vnum> <room|obj|mob> <число>,
если число не указано - возвращается первое вхождение (старый формат).

Чтобы пройтись по всем мобам с номером 4018 надо что-то такое:

eval i %world.curmobs(4018)%
while (%i% > 0)
  calcuid uid 4018 mob %i%
  %echo% Моб номер %i% - комната %uid.realroom%.
  eval i %i%-1
done

По всем предметам онлайн с номером 100 соответственно что-то такое:

eval i %world.gameobjs(100)%
while (%i% > 0)
  calcuid uid 100 obj %i%
  %echo% Предмет номер %i% - комната %uid.room%.
  eval i %i%-1
done

03.08.2009 Krodo
	В тригах добавлена команда 'calcuidall' - аналог 'calcuid' для выборки
всех мобов или предметов указанного внума. Возвращает соответственно строку со
списком id, foreach по ней вполне бегает. Ограничение на 25 вхождений, я делал
анлим, но там дальше падает на том же foreach, копать ради этого все функции
работы с переменными в тригах на тему длины строк как-то не вариант имх, хотя
может их не так и много, честно говоря не в курсе.

02.08.2009 Krodo
	Воткнуто заклинание 'обновление таймера', падает в виде одноразового свитка
с любого моба, подпадающего под заданные параметры. Для чего заодно воткнута
система этого самого дропа с конфигом в виде /misc/global_drop.xml, куда можно
будет че-нить еще втыкать. А для расчета шансов дропа заодно воткнут лог убийств
мобов с левелом и экспой, который можно парсить. Ну конкретно по свитку щас
выборка из примерно 500 мобов и по шансам дропаться должен раз в 3-5 дней.
	Переделана триговая система с quested, через 'setquest' можно добавить
произвольную строку на указанный номер квеста, т.е. что-то вроде
setquest(12345 это тестовая строка данных). Прочитать это дело можно через
'getquest', которая возвращает или строку указанного квеста, или пустую
строку, если квеста нет или он есть, но без комментария (старый формат), т.е.
для проверки выполнен или нет квест юзать надо попрежнему 'quested'. Строка
до 128 символов и без символа '~' внутри (само обрежет/уберет если что).

30.07.2009 Krodo
	Зафиксен один выход за пределы массива в полях чара + завал памяти на
смастерить лук, либц вроде даж перестал спамить про инвалид поинтеры.

25.06.2009 Polud
	Добавил к целям умения "изгнать нежить" расу "призрак".

07.06.2009 Рогмир
	Исправлен небольшой косяк с активацией оружия.

05.05.2009 Krodo
	Зафиксен креш на 'исписке'. Имм и олц логи открываются/закрываются на каждую
запись как раньше. Оффтоп включен обратно.
	Чуть переписан сейв crc.lst, чтобы все дела делались за одно обращение к
файлу, а не за три (из-за его частой перезаписи лаги дисковой системы чаще всего
приходятся как раз сюда, хотя не ясно, че оно вдруг в этом году начало лагать на
обращении к диску, причем на обоих серваках).

30.05.09 Krodo
	Ротация сислога отрублена - на линуксе глючит.
Для потомков: на серве MALLOC_CHECK_ выставлено в 1 через авторан, т.к. либц
стабильно абортит мад из-за корявой работы с памятью, вобщем все плохо. =)

30.05.09 Svent
	Поправил ошибку в интерпретаторе триггеров в поле weather.season.

29.05.09 Рогмир
	Добавлена возможность менять при активации сета среднее у оружия и вес
(вроде как у всего). По идее не особо аккуратно и не особо тестировалось,
но если какие проблемы возникнут - быстро поправлю.
Пример формата сета в setstuff.lst:
Vnum: 68815 ;длинное копье
	Oqty: 5
		Clss: 3 5 9 11
	    Amsg: &YДлинное копье ярко вспыхнуло солнечным светом и угасло.&n
	    Dmsg: &yДлинное копье тускло засветилось и медленно погасло.&n
	    Ramg: &YКопье $n1 ярко вспыхнуло солнечным светом и угасло.&n
	    Rdmg: &yКопье $n1 тускло засветилось и погасло.&n
	    Afcn: 1 10
	    Afcn: 2 10
	    Dice: 5 10
	    Wght: 2
Dice - описывает среднее, в данном случае получится 5d10. Wght - вес. Идти
должны именно в таком порядке (Wght - последней строчкой, Dice - перед ним,
обе строчки необязательны, если их нет - вес и среднее при активации не меняется).

26.04.09 Svent
	Поправил ошибку в запечатывании комнаты, из-за которой она не работала
при инте под 50 и выше.

24.04.09 Svent
	Поправил косяк с комнатными спеллами, из-за которого комнаты могли
не убираться из списка, даже если спеллы с них сняты.

24.04.09 Polud
	Переделал заклинание !запечатать комнату! в заклинание на комнату
(MAG_ROOM). Убрал поля ROOM_DATA->forbidden и ROOM_DATA->forbidden_percent -
не теряйте %).

24.04.09 Svent
	Доделал спелл "рунная метка" для волшей.

23.04.09 Polud
	Сделал статистику использования заклинаний. Управление командой 'заклстат'.
Команда доступна иммам 33+. Если сбор запущен, то один раз в сутки результаты
автоматически сохраняются в файл LIB_STAT/spellstat.txt.
	Также убрал мобрасы из char.* в db.*.

22.04.09 Svent
	Переделал работу спеллов на комнаты. При кастовании комната суется в лист, все
функции бегают по этому листу. Если все аффекты сняты - комната из листа убирается.
Печать и костер на эту систему пока не переводил.

19.04.09 Polud
	Убрал проверки на "классы" CLASS_UNDEAD, CLASS_HUMAN, CLASS_ANIMAL. Вместо них
сделал проверки на расу моба. Сделал проверку на тип комнаты ROOM_HOUSE перед загрузкой
ингров в моба.

12.04.09 Svent
	Увеличил вероятность срабатывания "легкой поступи", из "предсмертной ярости"
убрал штраф на срабатывание от мортов.

11.04.09 Svent
	Переделал логику слотов под способности. Теперь они динамические, каждые N мортов
(в зависимости от класса) персонаж получает дополнительный слот. Раз в сколько мортов -
определяется константами, вынесенными в массив. В любом случае, последнюю способность
персонаж всегда получает на 28 уровне. Также сделал увеличение количество способностей
"любимое оружие" (+1 за 6 мортов) и "мастер оружия" (+1 за 7 мортов). Соответствующим
образом переписал features.lst. Вроде все.

06.04.09 Polud
	Добавил перезагрузку рас мобов без ребута. reload mobraces.

04.04.09 Рогмир
	Теперь должны качаться только изученные умения, умения, полученные одеванием особой
вещи качаться не должны (по крайней мере так задумано). Иммы с помощью заклинания "призывать"
теперь могут призывать даже игроков меньше 11 уровня и игроков в лаге. Исправлена ошибка в
реализации вещей, увеличивающих процент владения умением.

31.03.09 Polud
	Сделана загрузка ингредиентов в труп моба согласно описанию рас (типов) мобов.
Расы описываются в файле misc/mobrace.xnl. Старый способ загрузки из списка
Character->ing_list пока работает тоже. Т.е. если описание расы моба в файле mobrace.xml
существует - то загружается по-новому, если нет - по-старому.

25.03.09 Polud
	При установке лага через WAIT_STATE(,) проверяется, чтобы новый лаг не был меньше
уже существующего. Случаи, когда лаг, отличный от 0, устанавливается другим способом
на данный момент в коде отсутствуют.

22.03.09 Рогмир
	Теперь шмотки могут увеличивать умения. Заклинание "приковать противника" не
позволяет входить в пенты, реколиться, прыгать, релокейтиться и быть призванным.
Способность "кошачий глаз" позволяет видеть предметы на земле в темноте.

21.03.09 Polud
	Введен флаг MOB_GUARDIAN, который проставляется при загрузке моба. Так что
теперь список стражников дергается только 1 раз.

18.03.09 Polud
	Описания умений перенесены из файлов skills.lst classskills.lst в файл skills.xml
	Введены мобы-городские стражники. Описываются в файле misc/guards.xml.

13.03.09 Polud
	Mute больше не будет слетать при ребуте.

05.03.09 Polud
	Пофиксены проверки соответствия скилла классу чара.

22.02.09 Krodo
	Зафиксен чек наличия мобов через касты чарами призыва/пенты/релокейта.

18.02.09 Krodo
	Терь на клетку с флагом 'клан замок' нельзя повесить гористую местность
(SECT_MOUNTAIN/SECT_HILLS для копания), меняется на гладкий пол при парсе зон
и олц редактировании. Можно канеш было в копании воткнуть проверку просто, но
так более тру мне кажецо.

15.02.09 Krodo
	Раз уж напомнили о себе соратники чернобога - доделана проверка crc файлов
таймеров и объектов ренты персонажей.

14.02.09 Krodo
	Зафиксены храны при ренейме персонажа, вроде раньше была эта фигня, может
при переписывании потерялось. По 'гр лидер имя' терь не смотрятся мобы.
	По ядам: знач белена/дурмана теперь чистые дебафы на снижение угрозы от цели,
плюс оба яда ставят на мобов !переключение.
Белена: -хитролы и -хп.рег (5,5%-15% у чаров и 10,5%-20% у мобов, скилл 10-200).
При скилле выше 80 до кучи идет -дамаг от физ.ударов и -скиллы (4%-10% у чаров
и 9%-15% у мобов, скилл 80-200).
Дурман: -каст и -мем.рег, при скилле выше 80 идет -дамаг от заклов и -скиллы,
проценты соответственно теже, что и у белены.
Минусование в процентах дает нам то, что чем жоще там враг - тем жоще мы его
травим. Ну и все это ес-сно еще до 3х раз стакается, так что вполне ощутимо.

11.02.09 Polud
	Прикрутил парсер ХМЛ, пока на посмотреть. Весь парсер - два файла (xmlParser.cpp и
xmlParser.h) Достаточно простой, но, вроде, работает. Добавил тестовый класс для
параметров рас мобов, сами параметры считываются из xml-файла. Вариант, конечно,
не окончательный, но оценить годится нам такой парсер или нет можно.

10.02.09 Polud
	Доработки 'прикрыть' по результатам тестов. Теперь работает в лаге и сделано
в виде режима. В 'счет все' добавлена строчка с данными о том, кого прикрываем.

08.02.09 Krodo
	По ядам: первый раз теперь ядит любой, а не только скополия, чуть уменьшен
шанс отравить потом, при первом отравлении криты тож работаю. У аконита вместо
мортов просто идет 5 дамага + левел/2. Скополия зафиксена: процент увеличивает
реально любой входящий дамаг, но кроме стаба. Криты идут терь не на какой-то
конкретный яд, а просто рандомом, пока 5 критов: аналог баша, -статы, -реакция,
-инициатива и -живучесть. Величина минуса зависит от левела (левел/6).
Все, что касается ядов вынесено в poison.cpp/hpp. Добавлено еще пара ядов, на
-дамролы/хитролы/броню и -каст/мем. У скополии 5% терь на стак.

04.02.09 Krodo
	У черноков яд вобщем раз в минуту на мобах тикает терь в бою и вне боя,
вроде раньше так и было. На чарах раз в 2 секунды. У чармисов по чарам дамаг
снижен на 20%, напосмотреть.

03.02.09 Krodo
	Пьяные и за кем-то следующие персонажи идут куда надо, а не куда получится.
Яд скополии терь при первом ударе ядит 100%, иначе его влияния в группе как-то
совсем уж плохо смотрится. Подправлены мессаги ядов для слепого чара. Тикание
ядов у мобов вне боя пока воткнуто как раньше у яда раз в минуту, но вообще эт
переделаю, у черноков надо короче старый вариант делать и не парить мозг. У
аконита воткнуто +1..5 дамаги за стак от мортов.

30.01.09 Krodo
	Воткнут второй яд, на +3%..+9% любой входящей дамаги по целе, при крите
минус 4 всех статов на 30 секунд. Расчет +процента дамаги идет до скрытого.

29.01.09 Krodo
	Зафиксен креш на заклах типа MAG_AREAS (по нескольким целям в комнате),
когда за умирающим хозяином пуржатся клоны, указатели на которых остаются в
сформированном до того списке.

28.01.09 Krodo
	Убрано 'потестить', яды идут в 19ю зону если что. Зафиксено -1 секунд при
бд по счет все и авто-одевание на грудь.

28.01.09 Polud
	Подготовка к введению рас мобов. Добавлены названия рас,
редактирование в OLC расы моба, загрузка и выгрузка рас в mob-файлы.

25.01.09 Krodo
	Знач теперь травить в бою можно только имея скилл 'отравить'. Соответственно
вооружаться и бить отравленными пушками смогут все, просто без применения яда.

24.01.09 Krodo
	Вобщем воткнул один более-менее законченный яд, дамаг + баш при крите.
Расход жидкости при нанесении на пушку терь зависит от левела, 2 порции на
20+ и 3 на 30м, тестовая баночка на 30 порций.

22.01.09 Krodo
	Зафиксено сдувание черноков от ядов.

21.01.09 Polud
	Предпринята еще одна попытка переделать умение 'прикрыть'.
Теперь прикрыть можно только не находящегося в бою персонажа от нападения,
каковое совершается командой 'убить' ('атаковать') или одним из спец.умений:
'заколоть', 'сбить', 'метнуть', 'богатырский молот', 'оглушить', 'пнуть'.
По мере поступления дальнейших преложений и замечаний работы будут продолжены.

18.01.2009 Krodo
	Зафиксен креш на дамаге от облака стрел, который добивает моба. Как всегда
раньше не падало только из-за особенностей пуржа под фрей и везения, так то оно
начало падать еще когда в чар-дате появились дин. поля вроде списка скиллов, по
которым пройтись после пуржа уже не получается, просто не часто так срасталось.
	Воткнут тестовый вариант 'отравить' наемам, пока наиболее тупой яд - аналог
обычного яда, складывающегося до трех раз и с более высоким дамагом, бывают в
том числе и криты. Действует 7 раундов или 14 секунд, при складывании общий
таймер обновляется. Процесс отравления пушки выглядит так: есть емкость с
ядовитой жидкостью внутри, пишем 'отравить имя-пушки имя-емкости' и из нее
берется одина часть яда. Отравленной пушка остается пол часа, таймер видно при
осмотре, плюс просто в экипировке или инвентаре там звездочка зеленая
дописывается к имени. Снимать для отравления пушку тож теперь не надо. Пушку с
ядом может вооружать только наем. Пока есть только один тип жидкости, 'тестовая
ядовитая', баночку с 10ю зарядами которой под номером 4007 можно будет получить
у любого рентера по команде 'потестить'. За баночку снимается 100 кун со счета.
Ну и потом это все в магазы надо втыкать к остальным зельям, а если у кого-нить
дойдут руки до крафта - можно воткнуть более сильные аналоги магазинных ядов.

17.01.2009 Krodo
	Зафиксен креш на выводе заполненности контейнера. Вобщем пока тут видится
два варианта, как его вес может стать больше максимального: редактирование в
олц контейнера и дикей контейнера на ренте, из которого все содержимое без
проверок веса перекочует в первый выживший контейнер. Собсна способы не так и
интересны, факт, что зарекаться на макс.вес контейнера у нас не катит, поэтому
в вывод заполненности тупо воткнуто ограничение от 0 до 5.

14.01.2009 Polud
	В DG_Script добавлено:
%char.objs% - список UIDов предметов у чара в инвентаре, (по списку можно ходить foreach),
%obj.put(UID)% - помещает предмет %obj% в комнату\контейнер\инвентарь чара в зависимости от указанного UID,
%world.maxobj(vnum)% - возвращает поле max_in_world из прототипа предмета.
	Кроме того, исправлена ошибка обработки %random.all\char\pc\npc%, из-за которой эта конструкция не
работала в триггерах WLD и OBJ, так что теперь, возможно, заработают триггера, о которых никто и не
подозревал :)

13.01.2009 Krodo
	По жидкостям основное все вынесено в liquid.cpp/hpp, плюс подправлено чтобы
добавлять можно было дальше не зелья. Спам яда от мобов между раундами зафиксен,
щас любые должны укладываться. Заодно в олц терь жидкости все доступны, а не
только до 15 первых.

12.01.2009 Krodo
	Аффект отравления немного переделан на другой тайминг - тикает раз в пару
секунд, как и другие аффекты, а не при гейне хитов. При этом во время боя тик
совпадает с раундами, а не спамит между ними. Готовим почву под яды найомам.

10.01.2009 Pereplut
	По аналогии с ёмкостями для жидкости, теперь контейнеры для вещей
тоже отображают свое заполнение по команде "смотреть".
(в виде 5 надписей, примерно соответствующих 25, 50, 75, 90 и 100%.)
Это отображается только когда контейнер лежит в инвентаре или в экипировке персонажа,
на лежащих на земле контейнерах это не отображается.

09.01.2009 Krodo
	Воткнут режим 'потеря связи', собсна если в бою происходит дисконект - чар
один раз пытается зачитать свиток возврата, который должен лежать в инвентаре.
	Чаров, сидящих в нейм-руме по 'кто' терь видят только иммы и сам сидящий.
Да, передаю привет непоколебимому пареньку с ником 'рсппидарки'. Ж) Я не знаю
че там за проблемы, но так по крайней мере вопрос матерного имени в списке может
решить имм, имеющий плюшевую команду name, без всяких банов/делетов/дисконектов.

08.01.2009 Krodo
	Зафиксен креш с завалом полей на шмотках, когда у них в олц меняют что-то
вроде тех же эктра-описаний, при этом в маде онлайн есть такие предметы вне
глобал-списка (храны/почта), т.е. бага уже старая, просто не частая.
	Дружам добавлен автоматический блок щитом, механика самого блока - тоже
самое, что и у витюзей. Автоматом работает только при включенной осторожке.
Зафиксена бага в расчете блока с выходом за массив при плюсе бонуса реакции.
Убран неработающий штраф на дамагу в осторожке, штраф на хитролы со щитом
несколько меньше, чем с двумя пушками. В прохождение блока добавлен учет веса
щита выше 21 и дексы выше 21 (вместо таблицы). Сам скилл блока роляет терь до
200. Автоматический блок работает в том числе и на баш. Щиты ломаются от урона
в два раза медленнее остального стафа. Сам блок учится так же с 10го у старца.

06.01.2009 Krodo
	По крит.стабу чуть другие формулы: влияние на прохождение от скила/дексы
по 50 каждого, максимум 36%. Множители крита до 100 тоже самое по 0.5, после
100 по 0.3 за 5 скила.
	У черноков (ну или если кто-то так еще сможет) при надуве выше х 1.5 от
максимума хитов в пк есть 1% шанс весь этот надув потерять за 1 удар по ним
(считается только реализованная дамага с ненулевым итоговым уроном по чару),
чармисы надув при этом не теряют. Плюс терь нельзя надуваться об чармисов.

05.01.2009 Krodo
	По крит.стабу у татей: в расчете процента прохождения терь соотношение
влияния скила и дексы примерно 40/60. убран левый бонус от сависов при скиле
выше 140, терь просто плюсуется бонус реакции с дексы. В самой формуле крита
макс.процент прохождения снижен на 4,7%. Дамага с крита по мобам: примерно
минус 20% (разница множителей). Крит.стаб на чаров у татей пока воткнут в виде
обычного стаба с обходом санки и небольшим множителем (до +25% при 200 скила).
	Если сильно удивляют эти финты, то изменения связаны с тем, что таки был
нарисован на коленке дамаг-метр и заценены разные группы в процессе зонинга,
поэтому есть пища для размышлений и изменения будут не от фанаря, хотя они и
могут расходиться с некоторыми историческими заблуждениями. Ж)
	Дамага по цели в холде: от мобов х 1,5, от чаров х 1,25.

03.01.2009 Krodo
	При отправке посылок почтой терь доступен как весь обычный синтаксис, т.е.
'отправить йцук все|меч|все.меч|2.меч|3 меч', так и отправка первых х вещей из
инвентаря. Т.е. 'отправить йцук 5 все' - зашлет йцуку первые 5 вещей из инва.
Если какие-то вещи заслать не получится, то дальше первых 5 всеравно не пойдет.
Чуть подправлены флаги шмоток, которые нельзя услать почтой.
	Воткнут учет множественного числа у шмоток при локейте, вроде везде учел.

01.01.2009 Krodo
	Зафиксено съезжание рнумов предметов из-за почты при добавлении нового
предмета через олц.
	По заявкам в иммское 'где' добавлен вывод предметов, лежащих в персональных
хранах и на почте с указанием имен чаров, эт все только 34м.

30.12.2008 Krodo
	Посылки терь пуржатся при выкидывании на землю и имеют женский род. Убраны
почтовые поля reserved_money/count у чара - только лишние головняки и проблемы
синхронизации. При проверке почты выдается сообщение, если чару есть посылки.
	Подправлено надевание шмота, расчитанного на несколько частей тела, чтобы
при надевании без параметров не стопилось все на первом же занятом слоте, а
пробовало тыкаться по другим слотам.

29.12.2008 Krodo
	Добавлена посылка через почту предметов, пока просто тихо потестить. Система
вкраце такая: на почте 'отправить вася меч'. За посылку одного предмета снимается
100 кун сразу + резервируется бабло на 3 дня ренты посылаемой вещи. Собственно 3
дня оно и ждет на почте пока ее заберут. Если забрали раньше - оставшиеся куны
возвращаются отправителю. Если не забрали через 3 дня - деньги расходуются до 0
и посылка возвращается отправителю, там она его уже ждет до упора (рента в это
время не снимается, но таймер шмотки тикает в два раза быстрее). Отправить можно
до 25ти вещей одновременно (не важно одному или разным игрокам). Можно глянуть
состояние отправленных посылок: 'почта' у ямщика. Для получения посылки, как и
писем тупо на почте: 'получить'. Уведомления по всяким разным поводам шлются тож
через почту в виде писем (дикей, возврат) и при входе в игру.
	Зафиксено немного опечаток. Добавлено сообщение при 'дать все.предмет игрок'
если конкретного предмета нет, а игрок есть. В локейте подправлен порядок вывода
вещей, чтобы клан-храны не мешались локейтам на чарах/мобах, в личных щас такой
же поиск, как и в клановых + добавлен поиск на почте, если шмотку пересылают.

26.12.2008 Видолюб
	Исправлено Двойник %1 не является членом вашей группы и не работало когда в
группе было всего 2 человека.
	Добавлен перевод строки в сжатом режиме если не находит \r или \n в конце строки.
Krodo: подправлен появившийся креш на передаче лидера двойнику.

03.11.2008 Svent
	Уменьшил расход мувов на применение "железного ветра".

22.10.2008 Krodo
	Переписана и вынесена в отдельный файл уидная система антиксера шмоток, щас
гоняется в обж_ту_чаре не по глобальному списку, а по своему мапу уидов, поэтому
сильно быстрее и входом чара в игру с горой шмота не залагать.
	Топ чаров теперь не обновляется при каждом ударе из-за бэтлэкспы, обновление
идет на левелах/делевелах/ремортах/состоявшихся убийствах мобов.
update:
	Вобщем чет глючит список объектов, поэтому откатываем это дело. А т.к. после
него уже успелось тут навтыкать много чего - откатил на 8 число и ручками воткнул
все мелкие патчи, какие были, списки накачу обратно помедленнее и с тестами.

21.10.2008 Krodo
	Зафиксен локейт, слегка изменившийся из-за переписывания глобального списка
предметов, левел там терь учитывается как обычно. Зафиксен (надеюсь) пурж хранов
при плановом ребуте.
	Переписано очищение полей у вовлеченных в бой персонажей при экстракте/выходе
из боя чара или моба. Сейчас мы не шерстим всех мобов, а обрабатываем только
список, который ведется для каждого чара отдельно. По крайней мере резет дуры типа
вторых рипей, где разом идет полная очистка 10 зон - уже не вылезает за секунду.
В связи с этим изменен синтаксис:
change_fighting(ch) -> ch->clear_battle_list
TOUCHING(ch): ch->get_touching, ch->set_touching
FIGHTING(ch): ch->get_fighting, ch->set_fighting
PROTECTING(ch): ch->get_protecting, ch->set_protecting
SET_EXTRA(ch,skill,vict): ch->set_extra_attack
GET_EXTRA_SKILL(ch): ch->get_extra_skill
GET_EXTRA_VICTIM(ch): ch->get_extra_victim
SET_CAST(ch,snum,subst,dch,dobj,droom): ch->set_cast
и такой тупняк как
GET_CAST_SPELL(ch): ch->get_cast_spell
GET_CAST_SUBST(ch): ch->get_cast_subst
GET_CAST_CHAR(ch): ch->get_cast_char
GET_CAST_OBJ(ch): ch->get_cast_obj
	Ну вот пока как-то так.

18.10.2008 Krodo
	В спешиал продавцов воткнуто оповещение в дефолтный сислог, если продавец
изначально мертв. Оо Такой мертвый моб стоит как живой и фиг это видно вообще,
зато магазин при этом ес-сно не работает.
	Зафиксен креш, случающийся после перевтыкания продавца в магазинном олц.

17.10.2008 Krodo
	Зафиксена (если дело было только в этом) бага с реальным умиранием на арене,
саму пк-систему не трогал, т.к. не очень ясно что тогда делать с местями/флагами,
если на арене шло реальное продолжение пк. Поэтому ща просто не пускает на арену
в бд, каким бы способом туда ни пытались доставить чара, даже имм-командами.
	Залит напотестить переписанный глобал список предметов, внутри канеш ужас, но
в данный момент от него требуется шоб работал, остальное уже допилим. По тестам
экстракт объекта идет быстрее в разы, даже 500 шмоток при постое в любом случае
укладываются в пульс с запасом, хотя до этого в худшем случае вылезали за секунду.
	Подправлен показ описаний мобов, чтобы не втыкать там пробелы и вторую звезду.

08.10.2008 Krodo
	В личные письма перед каждой новой строкой воткнуты пробелы, для чего и от
кого имх и так всем понятно. Ж) До кучи воткнуто и в описания чара при осмотре.
	На мобах-рентерах при вешании спешиала автоматом убираются возможные флаги
скакуна и ставятся !очаровать и !оживить, есть преценденты. Ж)
	Так же при входе чара в игру проверяется наличие рентера в комнате, если
его нет, то чар кидается в мортал/имм старт-комнату (100/4056), ибо нефиг.

08.10.2008 Полюд
	Изменено умение 'прикрыть' - ща его можно применять на несражающегося чара,
и дальше оно соотв-но сработает если на этого чара кто-то сагрит. Прикрывающий
в это время может участвовать в бою (насколько я все это понял).
	Воткнута команда 'надеть', как синоним 'одеть', плюс изменен текст сообщений
при опознании шмоток, т.е. типа 'Можно надеть на шею.' вместо 'одеть на шею'.

07.10.2008 Krodo
	Оффтоп пока выключил, время идет, а там все без изменений. Зафиксены доски
опечаток и ошибок, невидимые для иммов ниже 34го даже с нужными привилегиями.

04.10.2008 Krodo
	Перевоткнуто в хеартбите почти все, что там дергается в 1-10 минут и раскидано
на разные пульсы, напотестить... Плюс pulse_update и чет там еще тяжелое разбито на
более мелкие функции, которые дергаются отдельно, но рядом по пульсам и так же раз
в минуту. Переделаны сейвы файлов, где втыкался вызов system для копирования бэкапа,
щас через буфер просто пишется и потом в файл скидывается, шоб пошустрее. При уходе
в ренту у чара не дергается на каждую пуржащуюся шмотку поиск рнума, а то там уже
чар даже с 500 шмотками лагает на секунду+ при ренте (на локалке кстати даже без
оптимизаций не тормозит, что странно, поэтому хз в рнумах ли дело, над потестить).
	Вобщем все это к тому, что хочется уменьшить проскальзывания пульсов.
update: на счет ренты с кучей стафа - тормозит убирание шмоток из глобального
списка. переделал это все на list, чтобы хотя бы не проходить два раза по списку
односвязному, как сейчас, но особо не спасло, т.к. всеравно уходит много времени в
случае кучи шмоток и их нахождении где-нить глубоко от начала. А вот дальше ускорить
за счет сохранения итераторов чет не получилось, глючит по черному и ковырять уже
просто запарило, поэтому весь этот код с list отложен до появления вдохновения.

03.10.2008 Krodo
	Вывод времени в сислог поменял и в хеартбите логирование воткнул, потестить
кой че, надо не забыть убрать потом тока.

02.10.2008 Krodo
	В привилегиях группа news переименована в boards, соответственно просто дает
полный доступ до всех общественных/имм досок, но с контролем левела при удалении
мессаг и без фишки с левыми именами, а то там уже начали проставлять другим иммам,
на что не было расчета когда кодилось.

26.09.2008 Krodo
	Зафиксен косячок с лоадрумом чара в тригах, 'версия' помимо даты выдает
время сборки мада. В mkill сунуто сообщение в еррлог, если у атакующего моба
есть флаг !сражается, а то тупняк получается, т.к. реально моб не сагрит.
	Подправлена группировка ингров на тему одного внума, но разнах названий
из-за мобов или там еще чего. Туда же добавлен учет материалов для крафта.

24.09.2008 Krodo
	Вобщем поиск мысли на тему плеера и чар-даты продолжается, поэтому писать
чего тут куда перевоткнулось пока смысла ноль.
	Переписана и воткнута в player система замакса мобов. Помимо меньшего кода
получилось еще и пошустрее, как при убийстве каждого моба, так и при лоаде чара
вообще. Чтение морченного плеера на праве (много замаксов) идет в 25 (лол) раз
быстрее при рабочей сборке с оптимизацией. Хотя все уже поди забыли ребуты мада
по 20+ минут, когда плееры полностью читались (большую часть замаксы и убивали).
Ну и при увеличении плееров, или там мобов, особых просадок скорости не будет.
	Зафиксил добавление в игнор, вроде должно имена искать норм.

22.09.2008 Krodo
	Минус new_load_mkill, new_save_mkill, SUF_OBJS, CRASH_FILE, SUF_TEXT,
ETEXT_FILE, SUF_BLACK, PQUESTS_FILE, PMKILL_FILE, delete_mkill_file, SUF_PMKILL,
pk_counter, IS_KILLER, CHECK_PUNCTUAL_WAIT.

21.09.2008 Krodo
	Questing и вся связанная с этой структурой система переписана на std::set и
воткнута в player.

20.09.2008 Krodo
	Минус last_olc_targ, GET_LAST_OLC_TARG, last_olc_mode, GET_LAST_OLC_MODE,
bet, GET_BET, bet_slot, GET_BET_SLOT, do_mhunt, mhunt в триге, hunting, HUNTING,
title_noname, race_or_title_enl, hometown, GET_HOME.
GET_WAS_IN(ch) -> ch->player.get_was_in, ch->player.set_was_in
GET_PASSWD(ch) -> ch->player.get_passwd, ch->player.set_passwd
PlayerProxy вынесен в отдельный файл.

18.09.2008 Krodo
	В моб-акте поменял последовательность проверки на трек моба, а то чет несколько
тысяч раз в секунду дергало поиск скилла зря (щас это все ж более дорогая операция).

10.09.2008 Krodo
	Знач зафиксив одну багу с хранилищами - родил другую, хотя система лоада
чара для проверки паса с дублированием чар-даты в списке в плане логики довольно
спорная, пока пофиксил на скорую руку, подумаем.

06.09.2008 Krodo
	Добавлены char_player.cpp/hpp - вобщем это эквивалент текущей системы защиты
от дурака в полях плеера, если их пытается дернуть моб (хотя сейчас само оповещение
в сислог не идет), но тут без макросов и в целом культурнее/надежнее намного. Пока
туда сунул pfilepos, чтобы глянуть как это вообще смотрится в коде. В итоге сюда
должны уйти все player-only поля.
	Из player_special_data_saved и частично char_player_data убраны: PADDING0,
talks, MAX_TONGUE, GET_TALK, Side, GET_SIDE, Lows, GET_LOWS, Race (дубликат),
Religion (дубликат), Kin (дубликат), Prelimit, glory, GET_GLORY, spare12..spare15,
spare0A..spare0F.
	Увеличен вдвое буфер сокета на отправку, насколько я вник в дефолтные настройки
фрибсд - должно работать (это на тему overflow при большом кол-ве инфы за раз).
	С учетом немного увеличившейся дамаги кузь в начале года - в принципе у них
сейчас есть вполне обоснованные претензии к порче макс.прочности ремонтом, т.к.
портиться стало в итоге злее. Щас ремонт будет менее агрессивно ломать шмот.

06.09.2008 Видолюб
	На базаре в резных помимо аффектов терь выводит и доп.свойства (насколько я
понял только первое, а не все).

04.09.2008 Krodo
	Вроде нашел я багу с редким пропаданием шмота в хранах, жоская фигня. Ж)
Это короче надо было умереть и не заходить в игру до ребута, попробуй такое на
локалке тестами повторить, епт... Ж)
	'make' без параметров пользует 'g++43', 'make test' собирает через 'g++',
вобщем-то для удобства на серваке и памятуя о прошлых тупняках, когда были
разные строки компилятора в cvs и на рабочем коде.
	На счет пропадания стафа, когда чар уходит в форс-ренту или ловит креш с
с кучей всякого хлама на борту - вобщем сейчас с костылем пропадать не должно,
и при креш-сейве или форс-ренте по идее засейвит любое кол-во предметов.
В случае нормального ухода в ренту ограничитель в 500 шмоток пока оставлен.

30.08.2008 Krodo
	Пофиксена бага при добавлении в пкл, когда чар до этого сделетился и вместо
мессаги про эту трагедию получали мессагу про облом с добавлением в пкл бога.
	На счет 'б ф В<null>' - эт канеш наглость, хотя и забавно. Ж) В данный момент
этот get_name_by_id возвращает "" при неудаче (вроде пустой фильтр там не должен
сканать), но вообще надо переделывать и использование этой get_name_by_id (их
не много, но в целом "" криво смотрится), и фишку с пропаданием продавца на
базаре (или мы снимаем товар, или мы берем денег с покупателя и они никому не
переводятся), потому что в любом случае можно например на вымученых тригах
просканить базар через 'б и'. Oo

25.08.2008 Krodo
	Пофиксено обновление таймера у части славы, если в стат вложено несколько
плюсов и потом 2 и более из них перекидывались в другой стат через олц славы.
	Пофиксен odamage в случае, если предмет взяли или он там в чем-нить, а то
не дамагало нифига даже в пределах зоны.

23.08.2008 Krodo
	В shutdown из опций reboot|die|pause убраны нулевые таймеры, чтобы сразу
мад не гасили. Для сразу если чего есть now или 1 секунда в опциях.
	Небольшие фиксы под студию 2008ю, а то чет вообще не собиралось уже.

22.08.2008 Krodo
	Знач one_argument, any_one_arg, one_word, two_arguments, three_arguments,
skip_spaces воткнуты шаблонами, чтобы не дублировать код для 'char const *'.
из save_char убран параметр load_room, т.к. не нашел я по коду ниодного его
правильного применения, в тригах в том числе, так же как и PLR_LOADROOM кстати,
из сета его убрал - флаг имх мертвый. Убраны spell_sort_info, compare_spells,
sort_spells, MAX_SKILLS вобщем заменено на MAX_SKILL_NUM - который не 200, а
просто равен максимальному номеру скилла, так все же удобнее циклы гонять.
	Подправлено вроде с освежеванием, если я правильно понял мысль.

20.08.2008 Видолюб
	Группировка одинаковых предметов в списке при уходе в ренту персонажа,
// - 2700 кун (900 если надеть) за красный пузырек [9], в таком плане.

17.08.2008 Krodo
	Косметические дофиксы, пара syserr в сислоге и под 4.3.2 gcc варнингов нет,
ну и минус несколько сишных снятий константности.

16.08.2008 Krodo
	Немного подправлены скрытый и осторожный у наемов. Нет, я не влезаю опять в
эту муть с игровыми изменениями. Ж) Типа работа над ошибками.
	На тему скрытого: уменьшена зависимость итоговой дамаги от среднего пушки,
т.к. никаких изменений в плане проников я не вижу, никто из билдеров на эту тему
не чешется. Уменьшена она не фатально, но в два раза, с зубочистками ходить все
еще смысла никакого, например между 12 и 21 средним будет больше 30% разницы.
Меньшая разница на пушках компенсирована чуть другим графиком дамаги от скилла и
левела/морта, в целом скажем так на ступень, т.е. с 21ср примерно как до этого
с 24ср, но с большим кол-вом мортов (15-20) плюсов уже никаких, дальше в лес там
уже меньше, чем было, т.е. график не становится круче.
	На тему осторожки: Расчет сависов фиксирован 80% от того же дружа при любом
значении скилла. Это конечно срезает сависы при скилле 80 и ниже, но зато
добавляет их при скиле в 120 и выше, т.е. в целом тема нейтральная, просто так
имх логичнее и с большим кол-вом мортов наем не становится все хуже и хуже по
сравнению с другими такими же морченными товарисчами. Пофиксена бага в том плане,
что у наема при кастах и простых ударах мобов осторожка тоже считалась урезанно.
	Пофиксен снос крыши под новым gcc на парсе базарного фильтра.

15.08.2008 Krodo
	Отключен пока вызов sendmail при отсылке паса, потому что всеравно нифига
щас не отсылается, только зря мад лагает. Черный чета пропал, так что хз будет
вообще работать или нет.
	Мад на серваке знач щас собран на gcc 4.3.2, вроде даж пока работает, там
некоторое кол-во варнингов добью уже по ходу дела, если уж пересядем на 4.х.

12.08.2008 Krodo
	С мест сообщают (с), что танк должен следовать первым, а не последним,
пофиксено при смене лидера через 'гр лидер'.
add: Несколько левых обращений мобов к полям плеера.
add: Продолжаем потихому фиксить варнинги на последнем gcc.

10.08.2008 Krodo
	В wdamage, mdamage и odamage воткнуты проверки на соответствие зоны трига и
текущему местоположению чара, чтобы не дамагало там после реколов из зоны тупо по
таймеру или еще как отложенно. Хотя и будет некрасиво в том плане, что мессага
например дойдет, а дамаг нет. Ж)

09.08.2008 Krodo
	Переформатировал вобщем сорцы немного на одинаковый стиль скобок и отступов.

08.08.2008 Krodo
	При одобрении/запрете имени, если это был не бох, а демигод, то мы об этом
так и пишем, а не вводим нубов в заблуждение.
	Воткнут канал оффтоп. Особенности: с 6 левела или ремортами, не тратятся мувы,
всегда видно кто говорит, не виден богам и соответственно они не могут туда
говорить, не ограничивается при муте, работает даже во сне и при смерти, виден
так же при написании мессаг и комнатах носаунд (говорить нельзя), учитывается
при игнорах (опция 'оффтоп' или 'все'), вкл/выкл через 'режим оффтоп', по
умолчанию у всех выключен. По команде 'вспом оффтоп' вываливает посление мессаги
и их время. Канал типа не модерируемый... Пользование: 'оффтоп текст'.
	На имма терь не пашет 'слово возврата'.

07.08.2008 Krodo
	Минус log.cpp, log.hpp (мертворожденные). Несколько варнингов под мсвс/гцц.

06.08.2008 Krodo
	В персональные хранилища добавлено оффлайновое оповещение о пурже стафа по
нулевому таймеру, показывает все спурженные за время отсутствия чара шмотки при
его входе в игру. В случае пуржа во время дисконекта или там написании мессаги
на доску - тоже запишется и вывалится при реконекте или входе в игру следующем.
	Подрубил дополнительный лог на хранилища, надо б уже таки ловить и фиксить
эту багу с пропажей, если она вообще есть.

03.08.2008 Krodo
	Вроде пофиксен креш на редактировании мобов через олц, но эт канеш все пока
подпорки, по уму потом тож придется переделывать эту тему.
	Пофиксен локейт предметов в клановых хранилищах, терь для этого не нужно
стоять в зоне интересующего клана. Также локейтяца предметы в персональных
хранилищах (онлайновых игроков), но без указания владельца.
	Добавлена команда 'группа лидер имя' (или leader, раз уж тут до сих пор живы
англ. аналоги). Соответственно меняет лидера группы на указанного товарисча, сам
бывший лидер попадает в новую группу, порядок следования при этом не меняется
(бывший лидер переставляется только, но танк остается тем же).
	Пофиксено небольшое неудобство на локалках без зоны с клан-сундуком, из-за
чего любой труп становился этим самым сундуком. Ну и заодно расчет рнума этого
самого сундука теперь идет только когда он реально меняется, а не при каждом
обращении к хранилищу.
	Добавлен 'режим пкформат', переключает вывод пкл/дрл с краткого на полный.
Плюс 'режим соклановцы' для показа входов/выходов этих самых товарисчей. Выход
видно в том числе через форс-ренду в лд, так что если кто-то из своих упал в зоне,
то можно точно увидеть когда он таки свалит.

02.08.2008 Krodo
	На пробу так заменил скиллы с массива на мап (ну а че, 6 мег не лишние),
гетер/сетер соответственно тож по-человечески терь воткнуты. MAX_SKILLS пока
оставлен, но надо будет все эти циклы еще переделывать, пока просто заменил
где нашел инит/резет + в сетере нулевой скилл не занимает поля, если его не
было и удаляет, если было.
	Минус clear_char (заодно убедился, что после мемсета там сносит крышу), и
после memcpy в мтрансформе при наличии деструктора тоже лажа полнейшая получаеца.
Вроде щас в чар-дате контейнеры и прочие вещи, завязанные на деструктор должны
работать, т.е. дальше там уже переписывать потихому поля - это дело техники.
	Пофиксено слежение за максом в мире шмоток в хранилищах.
	Пофиксен левый расчет итоговой брони на чаре в случае, если у шмотки
текущая прочность выше максимальной. Заодно вообще при чтении зон и в олц
воткнута проверка на эту тему с обрезанием до максимальной прочности.

01.08.2008 Krodo
	Структура char_data и все ее вложенные структуры (кроме указателей) вынесены
в char.hpp. Удалены файлы arena.cpp/hpp. В do_mtransform tmpmob делается на стеке
да еще и с memcpy намучено, на заметку. В Character воткнут конструктор/деструктор,
заменяющие create->clear_char и free_char. По коду CREATE чар-даты заменяю на стек
или new/delete, если там не мутно было (хотя потом надо на стек все эти темп чары
ес-сно перевести полюбому). Заодно пофиксена утечка в иммском set. Минус
create_char, free_char. По идее чар-дата щас везде через new/delete или на стеке,
никаких CREATE/free быть не должно. Т.е. уже можно пользовать стл контейнеры в
самой структуре и ее вложенных (пока только те, что не через указатель) структурах,
тот же битсет Feats сейчас вроде как очищается, а больше там никто ничего такого
и не сувал пока. Хотя на счет вложенных еще вопрос, как там идет мемсет нуля по
не-pod полям, по хорошему им надо тоже втыкать конструкторы, где и инить все, что
надо нулями, а не тупо идти мемсетом.

27.07.2008 Krodo
	Из чтения плеера убраны поля DmbD, FrzD, HelD, MutD. Давно не пользуются
и только зря смущают сишными маллоками в коде.

20.07.2008 Krodo
	GET_GOLD, GET_BANK_GOLD переделаны на некое подобие гетеров/сетеров, что
позволило по крайней мере логировать изменения денег у чаров, а то чет вообще
борода на эту тему в сислоге. Канеш сет смотрится так се, но делить еще и на
add/remove функции с проверками знаков пока чет обламало.
	У продавцов опять анлим денег и это есть правильно. По 'счет' у чаров до
5го уровня нормально пишется броня/ас. По мелочи там привилегии кодеру.
	В именах новых чаров не канают ё и Ё, старых пускает, но в принципе можно
и их сренеймить, т.к. не много насоздавалось. В именах файлов сейчас ё и Ё
заменяется на 9, чтобы не иметь проблем с локалями.

18.07.2008 Krodo
	При сейве не пишутся спеллы волхвов и иммов, не пишутся имена мемленных
заклов и таймеров скиллов, т.к. совершенно лишнее.
	Воткнута система проверки crc32 плеер-файлов. Ведется глобальный список
этих чек-сумм, который из мада не релоадится и при ребуте перезаписывается,
т.е. при работающем маде подменить проблематично. Ну и до кучи считается
чек-сумма самого этого файла. Все происходящее с этим делом идет в сислог
и иммам в онлайне + все эти сообщения можно смотреть по 'show crc' (в том
числе там будут сообщения, если при старте мада были какие-то непонятки с
лоадом этого самого списка). Канеш не панацея, но некоторых головняков при
тупом изменении плеер-файла вполне добавляет. Сохранение списка идет не при
каждом чихе у плеера на случай спама, а максимум раз в секунду, поэтому при
крешах могут быть ложные сообщения, но их должно быть очень мало.
Пока без шмоток/кланов, посмотреть чекаг будет в работе.

07.07.2008 Svent
	Поле "максимум в мире" в командах zon больше нигде не учитывается, максимум
берется из соответствующего поля самого объекта. Убрано отображение и редактирование
этого поля через zedit. Само поле пока оставлено, чтоб не было траблов с парсом *.zon.
Кроме того убрал ограничения на использование команд "счет" и "счет все". С теперешней
системой рола оно как-то совсем потеряло смысл. Плюс кое-какая, чисто эстетическая правка
таблички "счет все". Кстати, имхо, команду "счет" вобще можно убрать как морально устаревшую.

06.07.2008 Krodo
	По кто без параметров помимо числа видимых пишет общее кол-во смертных в игре,
даже если их не видно.

05.07.2008 Krodo
	При смерти лидера группа не распадается, а лидерство передается или первому
по списку, или персонажу с наиболее высоким скиллом лидерки. Если не будет глюков,
то воткну еще команду типа 'гр лидер имя' для передачи лидерства по желанию.

04.07.2008 Krodo
	Воткнута доска опечаток, для игрока внешних изменений никаких, пишется репорт
так же через 'опечатка текст'. Ограничения на 6 лвл или рем, можно писать несколько
мессаг подряд, всего 999 мессаг, дальше не затирается самая последняя, а пишется
сообщение о нехватке места, как раньше про файл. Все тоже самое на счет 'ошибка'.
Из списка видимых досок убраны те, на которые нет прав на чтение (только запись).
Права на чтение/удаление опечаток имеют 34е и иммы с группой olc в привилегиях.

03.07.2008 Krodo
	Рандоматор циркулевский совсем вырезан, на кубики щас тож с буста идет рандом.
	Команда 'конец' работает только без параметров, грят разводят нубов. Ж)

02.07.2008 Krodo
	Воткнут учет фриза при трансфере славы + проверка этой темы при входе в игру.
	С изучением заклов/скиллов поправлен вчерашний косячок.

22.06.2008 Krodo
	Мобы-учителя не будут заходить в комнату, если в ней уже есть другой учитель.

21.06.2008 Krodo
	Хранилища персональные накатил слегка подредактированные. Расшаренные вырезал,
хотя они и не глючили, но эту тему я хочу сделать по-другому и скорее всего вместе
с хоть каким-то подобием аккаунтов. На создании новых шмоток через олц вроде глючить
терь не должно. Доделал релоад шмоток отдельному чару, т.к. руками при едином файле
таймеров это так просто не откатить при надобности. Не уверен на счет корректности
обработки входов/выходов чара из игры, но сейчас телодвижений при этом делается меньше
и списки при дисконектах не перекидываются туда-сюда. До кучи увеличен лимит шмоток
(50) для волхвов (у остальных по 25). Так же по-другому сейчас обнуляется бабло чара,
если не хватило денег на ренту, чтобы убрать случайные обнуления при входе в игру и
возможность пуржа без списаний с чара. Ну и хотя без общих хранов код стал местами
намного проще и в целом почти в два раза меньше, за давностью так сказать лет могли
быть добавлены новые баги, так что это все пока ахтунг, а не рабочая система...
	В сислоге поправлен левый вывод иммам о смертях на арене от чармиса.

16.06.2008 Svent
	Добавлена способность "кошачий глаз", позволяющая мемить спеллы во тьме.

15.06.2008 Рогмир
    Добавлена команда "затоптать". В команде "сравнить" теперь учитывается количество
    ремортов персонажа.

14.06.2008 Krodo
	При попытке парирования с двуручником или одной пушкой терь пишется о двуручнике
или одной пушке, а не о безоружном.
	Все куски кода с персональными/общими хранилищами закомментированы, т.е. собирается
и работает сейчас даже если удалить depot.cpp/depot.hpp.
	Включено создание новых предметов через олц - посмотрим четамкак в плане глюков.
	Пофиксен крэш на нулевом таймере прототипа при осмотре предмета.

13.06.2008 Рогмир
	При осмотре моба теперь пишется, сколько еще последователь будет с чармером.

13.06.2008 Krodo
	Пофиксен крэш, получившийся в рез-те выноса mpurge из команд-интерпретера при пурже
самого себя (фрибсд это прожевывает, но в цигвине валится на последующем free_varlist).
	Убран лоад персональных сундуков и спешиал в банке. Ж)
	По 'счет все' добавлено кол-во времени, которое осталось сидеть в бд.

24.05.2008 Svent
	Переделал прокачку "железного ветра", так чтоб работала в бою, а не только
при вступлении в бой с команды.
Залил патч Полюда - команды пурж и детач теперь работают вне зависмости от состояния
NPC, что фиксит пачку абьюзов, кроме того поправлено несколько мелких багов в триггерах,
и комаде xteleport добавлен необязательный параметр follower, позволяющий телепортить
персонажа, вызвавшего триггер, вместе с последователями-NPC, даже если это не чармисы.

18.05.2008 Svent
	Сделали старую фишку, чтобы предмет "источник света" светил в людом случае,
куда бы он не был надет, а то не работали "головные фонари" и т.п.

13.05.2008 Svent
	Поправили баг с клонированием кун у умертвий.

04.05.2008 Svent
	Пофиксил баг с переполнением счетчика у врат (по наводке Лешко).

24.03.2008 Krodo
	Сопелки, черепа и чего там еще есть с чармисными заклами - теперь можно применять
только до 25го уровня. Плюс ограничения по профам: кастеры + дружи, как самые забитые.
Вобщем данный вид шмоток рассматривается как помощь в морте тем, кому это делать трудно.
	При стабе дамаг со скрытого терь на 1.5 делится, т.к. в прошлый раз он стал выше
для компенсации дамага с оффа, а он там потом множится по трипаному + множится при стабе,
т.е. разница вышла ощутимой в итоге. Плюс все же расчет коэф-та седнего пушки считается
от тех циферок, что пишутся как среднее при опознании.

23.03.2008 Krodo
	У наемов в скрытом воткнута некоторая зависимость от среднего пушек. Она не фатальная,
но разница будет в пару десятков процентов в случае забочисток в руках.
	Кузнецам вобщем вернул старую версию глуша до лучших времен возможной переделки механики
под баш у глуша и молота. Зависимость от среднего тоже чуть подрезана.
	В целом прихожу к выводу, что гонять друг за другом дамаг проф смысла нет, лучше уж
пофиксить чармисов, на дамаг которых тут пускают слюну все остальные файтеры и правильно
надо сказать делают.
	Немного снижены цифры в мессагах ударов, а то чет крутовато взяли с мелкими буквами.
	На доски терь нельзя писать в дамбе.
	В сислог иммам идут смерти только при пк (без арен), в файл пишется все как обычно.
	Во время применения вихря терь нельзя в том числе и осушать напитки.

22.03.2008 Svent
	Добавил ограничение на вес носимого щита, равное удвоенному весу оффа. Ессно падает
при недостатке силы, как и оружие, и так далее.

22.03.2008 Krodo
	Таки надумал отключить хранилища с целью их тотального переписывания. Ну и заодно
определиться с олц и их влиянием на завалы полей при добавлении новых шмоток. Оо
Пока просто отключена поклажа новых шмоток в храны, чтобы освобождались в темпе.

21.03.2008 Krodo
	В качестве эксперимента по дружам: в осторожном стиле теперь учитываются большие
цифры брони и поглощения, соответственно может полностью поглотиться больший дамаг и
с чуть более высоким шансом + максимальный процент снижения дамага равен 75. В целом
я не считаю, что 'танковость' чара должна упираться только в ас, имх прямое снижение
дамага более логичная танковая фишка и как-то должна его выделять. Если попрет, то
надо будет оформить способностью.

20.03 2008 Krodo
	Изменены диапазоны дамага в мессагах ударов. Убран тип 'жестоко', добавлен тип
'убийственно', нижняя граница для смертельно - 341 дамаги. Для пинка воткнута таже
система с кол-вом и диапазонами.
	Во время боевых действий теперь нельзя закрывать и запирать двери, грят абузят.
	Мобы теперь агрят на сражающихся чармисов, грят тоже абузят.

19.03.2008 Krodo
	Поправлено умение врата в плане высоких значений скилла, при которых переполнялся
таймер, непойми зачем сделанный беззнаковым чаром, поэтому может где-нить еще всплыть.

11.03.2008 Krodo
	Продолжаем работу над ошибками. Ж) У кузь убран дамаг от способности при оглушении,
т.к. на умножение этого дамага расчета изначально не было и получилось все куда круче,
чем планировалось. Речь идет о первой атаке при глуше, вторая уже идет как обычно.
	Доп выстрел еще слегка подкорректирован в сторону улучшения: максимальные проценты
по 2му и 3му допам 100 и 70 соответственно при 200 скилла и 50 ловки. В целом картина
сейчас такая: скилл 100-200 и ловка 21-50 накидывают до 16.65% итоговой дамаги каждый.
	Расчет рандома по допам опять идет для каждого отдельно, т.к. визуально это более
гладкая картина внутри раундов, хотя итоговый дамаг за бой практически тот же самый.

23.02.2008 Krodo
	Господин zone.ru тут пнул на тему касяка в доп.выстреле у чаров с луком в руках
и отсутствии самого скилла, потому что там от ловки/мортов терь плюсуется своя часть,
а не множится на нулевой скилл при расчетах каждого допа, поэтому получаеся некий
шанс на 2-5 атак. Вобщем зафиксено, раз уж за него брался.

13.02.2008 Krodo
	Откатил дт на старую систему, временное логирование, что втыкал не так давно - убрал, ибо
место на серве, если не чистить и всеравно никому не нужно будет, желаю успехов.

12.02.2008 Krodo
	Корректировка доп.выстрела: перенес небольшую часть процентов с половины скилла до
ста на половину скилла выше ста и дексы. Плюс на жопе теперь немного по-другому режется,
идет модификатор 70% на каждый доп от текущего максимума. Т.е. в идеале при всем максимуме
на жопе будет так: 70 63 42 21.
	В дт не учитывается слот света, а то чет как-то несерьезно всякие светящиеся шарики
вместо нормального шмота брать.
	Добавлена проверка на комнаты с медленными дт и наличием флагов типа !магик, !сумон и
!телепортаут, ибо нефиг так наглеть.
	Пофиксен абьюз этих медленных дт, когда можно было выйти через прокси-рум без рекола.
	Из прокси-комнаты теперь выкидывает, если чар остался в маде один со своего ip, ну или
остальные там зареганы и т.п. ситуации, вобщем если садить в проксю его уже не за что, т.к.
всеравно в итоге ему во-первых сидеть ждать имма или падать в лд на 40 минут, во-вторых
имм скорее всего просто зарегает, хотя мб он там случайно оказался и регать нифига не надо.

11.02.2008 Krodo
	В обычных дт терь теряется не весь шмот, а рандомно от 1 до 3 одетых вещей. Цифры пока на пробу.
Не учитываются контейнеры, чар улетает на ренту с 0 хп/мувов, сбросом аффектов, мема и до тика будет
в обмороке. Сами шмотки выбираются ес-сно тож рандомно, а не по порядку слотов. При флагах бд никаких
изменений - чар, уходя в дт, получает смерть по полной программе с минусом экспы и шмота.
	Пофиксено пара инициализирующе-обнуляющих заклы циклов при лоаде чара.
	Воткнуто более адекватное минимальное положение для инвентарь/inventory, чтобы как и экипировка
не работало в состоянии обморока и хуже.
	Временное логирование на мобов и камни, надо бы собрать статистику для размышлений.

10.02.2008 Krodo
	Про доп.выстрел: при расчете доп.атак теперь влияет скилл выше 100, но влияет не так круто,
как до сотни. Система пока следующая: есть старый максимум процентов 100 66 40 20, и есть второй
максимум 100 90 60 30. Разница между ними поделена на два, и каждая из этих частей увеличивается
одна за счет скилла 100-200, другая за счет дексы 22-50. Разница может быть кажется и не очень
большой, но в плане итогового дамага при макс скилле и дексе это +24%, поэтому есть куда максить.
Штрафы по мортам на доп немного изменены, на 3й и 4й допы идут от 0 по 20% за морт до 5го морта.
Так же подправлен сам расчет скилла доп.выстрела, чтобы избавиться от влияния морали. Изменение
двоякое, с одной стороны это -рандомная прибавка к скиллу иногда при расчете, с другой это и
минус непрохождение скилла, когда охот хоть какой морченный и одетый выдает 1 атаку, т.е. в целом
фикс скорее психологический. Заодно там более грамотно воткнут обход осторожки и прочих вещей.
У чармисов максимум допа оставлен 100 и отрублены 3й и 4й допы, с чармисами потом буду думать.
Так же при всяких башах/глушах отрубается 1й и 2й допы, т.е. максимум 3 атаки с меньшим процентом.
	Уменьшены коэф-ты от +тела по профам с учетом недавнего пересчета хп, т.к. чета это местами
получилось слишком уж жирно даже с учетом фикса ас, с мортами там и так хп плюсуется нормально.

08.02.2008 Krodo
	С инвизами своими вобщем доделал, чтобы по уму все было, а не входил в игру со своим i25.
	Из cvs убран /misc, потому что всеравно он не соответствует файлам на сервере в силу
нежелания билдеров палить всякие рецепты и прочие штуки, поэтому /misc предлагается брать со
всеми остальными нужными файлами из билдерского движка на сайте, который и буду обновлять по
мере надобности.
	Уходим от порочной практики расчета жизней персонажа при левелах/делевелах и рандома при
этом процессе. Родные макс. хп теперь пересчитываются так сказать на лету при входе в игру,
вложениях/убираниях славы в теле (потому что это немного овер влить на морте в тело, а потом
перелить на 30м куда-нить еще и иметь все плюсы от обоих вливаний), ну и левелах/делевелах.
Плюс при делевелах и повторных левелапах теперь не будут сливаться максимальные хп.
	Пофиксен показ чаров, находящихся в лд при бд, в клановых пкл/дрл, фактически переписано
это все дело, но щас вроде должно уже всех показывать, кроме дисконекта без бд.
	В show linkdrop добавлен показ последней комнаты чара до переноса, потому что если он
оказывается через некоторое время в странной комнате (102), то фиг поймешь где он реально
ушел в оффлайн и занимает какую-либо зону или нет.

08.02.2008 Stribog
	Добавлено 3 типа сектора для комнаты: мощеная, утоптанная и разбитая дорога, отличаются
количеством тратящихся мувов.

06.02.2008 Krodo
	В сборку через 'make test' добавлены флаги дебага для стл, мб кому-то и пригодится.
	Инвиз при старте терь не снимается при наличии соответствующей привилегии у чара.
	Переписано добавление новой комнаты через олц, т.к. было там два касяка.
	Добавлен временный лог текстовых полей шмоток, мб че-нить прояснит по поводу завалов.
	Буфы локальные в лоаде чара удвоил, не всегда все влезало.
	Отключил пока создание новых предметов через олц.

04.02.2008 Svent
	Пофиксил небольшой баг, который не давал запускать вихрь из боя за спиной танка.

03.02.2008 Krodo
	Процесс резета зоны стал идти на 30-40% шустрее. В принципе резет отдельно взятой зоны
никого не интересует, некоторые трудности создают резеты комплексов зон, типа тех же рипей-2,
где разом резетится десяток зон.
	В перс.хранилище терь нельзя положить шмотку с ITEM_REPOP_DECAY и еще парой флагов, потому
что придется тогда при резете зоны еще и по хранилищам идти.
	При входе в игру теперь сбрасывается отрицательный имм-инвиз.

01.02.2008 Svent
	Поправил мессаги при скилле - забыл переделать вчера, плюс небольшой тюнинг -
понизил максимальную вероятность доп. атаки до 80%, а то шибко круто было. Сейас вроде бы
самое то.

31.01.2008 Svent
	Сделал возможность вступать в бой с команды применения железного ветра.
В общем как с молотами и прочими башами.

31.01.2008 Krodo
	На счет креша на сейве хранилищ чета я пока в раздумья вобщем, потому что явно портится
контейнер извне, причем повторить то как бы не получается, поэтому дебажить сложно. Ж) Как
временную альтернативу воткнул сохранение в бэкап файл и перезапись оригинала при успешом
сейве, т.е. если и будет еще падать в недрах стл на обходе списка - стаф не похерится. Тоже
самое добавлено на файл славы и лог славы.
	Поправил сохранение стафа в файлы в плане быстродействия, делать полную копию прототипа
с помещением в список и всеми делами с последующим ее же пуржем и очисткой памяти ради того,
чтобы просто прочитать из нее поля - это не самое умное решение. Например сейв клан-хранов
с >3.5к шмоток занимал более секунды, тогда как сейчас идет меньше 0.1 секунды, ну и в целом
будет поменьше нагрузки при сейвах шмоток плееров/хранилищ.
	Поставил отображение аффектов (не доп.свойств) на резных запах при выводе списка предметов
на базаре, потому что сидеть статить 5-10 страниц меня мягко говоря не впечатляет. Может быть
нужно и на доп.свойства воткнуть, но там придется делать свой укороченный вывод текста, потому
что их много и в строку полностью могут не влезть, поэтому посмотрю как попрет.
	Воткнут запрет на суммон чаров 10 и ниже уровня, чета лекс грит абузеры кругом.

30.01.2008 Svent
	Добавил запрет на питье в бою во время работы скилла "железный ветер".
Поправил цвета при отображении умений.

29.01.2008 Svent
	В обсчем скилл "железный ветер" в тестовом виде добавил. Надо погонять туды-сюды,
посмотреть что к чему, и решить, а надо ли оно кузям, и оставлять ли в таком виде, или чет
переделывать.
UPD: Поправил несколько косяков в скилле, переделал блокировку рекола.

28.01.2008 Krodo
	По привилегиям: убран список офф.читеров, фактически сейчас его функционал заменяется
привилегиями, только пользоваться гораздо удобнее, вообще сомневаюсь, что из живых иммов
или кодеров кто-то кроме меня и лекса знал как пользоваться этим списком. Ж) 35й инвиз тож
убран, до кучи при входе в игру у чаров проверяются режимы кодера, холилайта, нохэсла и
флагов комнат, во избежание повторения недоразумений... Добавлена привилегия на титулы,
убран set title как защита от всяких юмарных парней, ставящих фигню без ведома игрока. Для
возможности принудительного удаления титула у игрока введена опция 'титул имя удалить'.
Командой 'титул' теперь нельзя пользоваться при активном флаге notitle, не важно имм/игрок.
	Ну и опять про кузь. Ж) На способность накладываются штрафы, если ремов меньше 5.
В цифрах это будет по 20% дамага за рем до 5 ремов, дальше 100% так и остается всегда.
Дамы от среднего на пушках увеличены: 21 ср - 3 дама, 24 ср - 3.5 дама, 28 ср - 4 дама.
Минимальный процент в рандоме вместо +силы теперь равняется левелу, т.е. максимум 30-100.
Воот, ну и вобщем вроде уже учтено все что можно в формуле.
	Убрана возможность снятия флага душегуба, вообще. Справку поменяю как будет в работе.
Поправлена небольшая бага при расчете стоимости ренты за персональное и общее хранилище, в
принципе сказывалось только первую минуту на постое, потом всеравно шел пересчет как надо.
	Поправлена бага со способностью тяжеловоза при 48+ силы, потому что оно тупо плюсовало
к силе при взятии из таблицы, при этом тот факт, что в таблице нет значений выше 50 никого
не смутил, в итоге макс.кол-во переносимого веса принимало левое значение. В данный момент
способность просто и незатейливо плюсует 10% к возможному переносимому весу.
	Снято ограничение на уровень каналов общения, базара и аука для реморченных персонажей,
так же им сразу видны статы по счету и счет все (хотя с учетом отмены авторолла я не очень
понимаю нафига щас вообще прятать статы).

27.01.2008 Krodo
	Надумал несколько недочетов в текущей формуле концентрации, которыми можно так сказать
слегка обойти систему. Не вдаваясь в детали скажем, что теперь дамаг помимо силы, левела и
рандома зависит еще от среднего на каждой пушке. При 28ср в прайме и 21ср в оффе максимум
будет 87 и 64 соответственно, это ниже текущих значений, но при этом поднята нижняя граница
рандома, которая сейчас тоже берется от +силы.

26.01.2008 Krodo
	Добавлена врожденная способность кузям 'концентрация силы' - накидывает чистой дамаги
от силы выше 25 и левела, по 5 дамролов на 30 левеле за силу. Слегка изменено 'оглушить',
чуть снижен порог процента успешного оглушения, но при этом добавился дополнительный
интервал при котором не добавляется дамага, а просто вешается лаг на цель. В компенсацию
30%, которые раньше шли в интервал с дамагой - в рандоме второго интервала минимальный
модификатор дамаги воткнут в 2, а не в 1. На новый интервал без дамаги выдается свое
сообщение, плюс цвета теперь идут от синего лага до светло-зеленого сбивания с ног.
Update: способность слегка переделана: теперь она плюсуется только при атаке с оружия, при
этом на дополнительный дамаг накладывается модификатор, который получился при бросании
кубиков дамаги оружия от его максимального дамага, т.е. может вообще практически ниче не
добавиться, а может и очень много. У оглуша во втором интервале вернул 1, и так дамаги
выходит порядочно. Ну и делитель по уровню терь 7, в принципе должно жить.

25.01.2008 Krodo
	Минус записи за пределы массива при чтении всех пяти типов аффектов шмотки. Не факт
канеш, что недавние завалы полей были именно из-за этого, но тем не менее.
	В obj_to_room добавлено возвращаемое значение, чтобы сигнализировать о попытке лоада
в несуществующую комнату, при этом экстракт шмотки в ней убран. Мне влом смотреть и править
50 вызовов по коду, по сути левая комната тут может быть сунута в основном только при
резете зон, особенно там полюбилась циферка 0 в виде номера комнаты, на которой точно
так же происходит экстракт объекта и дальше load_otrigger уже работает хз с чем. В резете
зон вобщем-то только и поправлено.

24.01.2008 Svent
	Перерисовал линейку оторбажения скиллов, а то уже с 6 что ли морта "божественно" и все. :)

24.01.2008 Krodo
	Так, ну знач купам тельце вернули, опять им реролл персональный и завязываем кароч.
Пофиксен show glory, а то там после прошлого раза перестало +- писаться. Ну и на счет
+тела при снятии придеца учитывать другие аффкеты и считать хп со шмота именно, а т.к.
пока лень - просто убрал. Так же пофиксен авторол при создании чара, чтобы не вылезал
за новые границы статов.

24.01.2008 Svent
	Добавил тип удара "ужалить" и соответствующие мессаги. Надоели зубастые пчелы. ж)

23.01.2008 Krodo
	В свете изменений АС... убраны старые неиспользуемые функции адванса/дисадванса,
немного изменены коэф-ты в таблице для хп от левела/делевела и расчета одетого +тела,
стратовые параметры тела у некоторых проф тоже переправлены. Потолок родного тела
терь 50 у всех. Заодно пофиксен баг, когда при снятии +тела оставались хп на чаре
выше максимума. Ну и с учетом изменений ас и тела - реролл всем при входе в игру.
	Пофиксена жоская опечатка во вплавке, при которой фейлов с ростом скилла
становилось только больше. Но т.к. это всеравно не так печально влияло на процент
фейлов, я таки попробовал заменить циркулевский рандомизатор на аналог из буста.
dice() остается пока со старым рандомизатором, number(x,y) работает с бустовским.

23.01.2008 Svent
	Добавил способность "непробиваемый" (impregnable), дающую по 1 AR и MR за каждый морт,
начиная с нулевого, но не более чем по 10 очков каждого параметра.

22.01.2008 Svent
	Вставил наконец в код обрезание АС в заивисмости от класса персонажа. Посмотрим как пойдет.

21.01.2008 Krodo
	В лог операций со славой терь идут только удавшиеся команды и пишется то кол-во,
которое было реально снято (в случае с -славой).

20.01.2008 Krodo
	Знач теперь таймер на влитой славе таки можно заморозить посредством фриза чара.
До кучи чары во фризе автоматически исключаются из топа прославленных. Они входят в
дополнительную распечатку иммам, так же, как чары с hide флагом.
	Отключен дополнительный лог хранилищ, вроде работают, а он там очень объемный.
При реролле добавлен показ старых статов за вычетом мортов.
	Т.к. уже далеко не первый человек случайно проскакивает ролл на тригах или просто
по невнимательности - стартовые статы теперь не раскиданы рандомно, а  выставлены на
минимальное значение, т.е. пока сам не раскидываешь - из меню не выйдешь.

19.01.2008 Krodo
	из интересного в коде:
Слава вынесена из файла плеера и вся лежит сейчас в едином списке, который нельзя
срелоадить во время работы мада, до кучи в нем же идет проверка мд5 полей, правда
отсылку на мыло пока не втыкаю. В любом случае, чтобы его поправить - это надо
ребутить/стопить мад и при этом не забывать про контрольную сумму или логи.
И даже если все это проделать - на одного чара больше 10 статов всеравно не воткнешь.
При входе в игру идет проверка на валидность как стартовых статсов (они сейчас
сохраняются у чара при ролле), так и итоговых статов с учетом мортов и славы.
Если не сходится - статы срезаются по стартовым + морты + слава (слава при загрузке
списка тоже проверяется на кол-во влитых статов), если не сходят и стартовые статы
- то чар отправляется на реролл, т.е. всеравно происходит срез. В целом слава сейчас
по краней мере стала представлять из себя единую систему, изменения которой уже
намного удобнее отслеживать и контролировать.
	игрокам:
Убран автоматический ролл при создании персонажа, при ручном ролле дается
полное кол-во статов и теже границы макс/мин. У старых персонажей идет сброс
и перераспределение статов и славы. Если у вас был автоматический ролл, то
вы остаетесь с тем же кол-вом статов, что и раньше + получаете бонусом 2к
славы за свои труды по генерации чара. Слава теперь вливается в статы без
участия иммов командой 'слава'. Потраченная на статы слава имеет ограниченное
время действия (пол года), одновременно может быть влито не более 10 статов.
Посмотреть чего куда и на сколько у вас влито можно командой 'слава информация'.
Потраченную славу так же можно перераспределять с одного стата на другой без
участия иммов через туже команду 'слава', не чаще раза в две недели. Так же
в 'лучшие' добавлен раздел 'прославленные', но пока он там ес-сно мало
информативен, т.к. учитывается слава со старых тестеров и прочих. Справка по
всему этому делу будет позже, пока вся инфа тут.
	иммам:
в команду glory добавлены пункты:
transfer - это переброс всей (влитой в статы и свободной) славы с чара
на другого чара, если у принимающего было что-то влито в статы - затирается,
свободная слава плюсуется.
remove - это возможность отнять у персонажа уже влитую в стат славу, потому
что других вариантов сейчас нет (set статов убран из кода полностью).
hide - это флажок, влияющий на присутствие чара в топе прославленных.
Иммам в 'лучших' дополнительно выводятся все чары с включенным hide флагом.
Так же теперь все действия со славой помимо кармы (включая точку) идут в
отдельный лог, доступный по 'show glory'. Лог выводится по убыванию дат и
имеет несколько фильтров:
число - выводятся операции +- со славой, большей либо равной указанному числу
transfer, remove, hide - выводятся только соответствующие операции.
По 'show stats' теперь видно общее кол-во славы в мире, раскиданной и свободной.

15.01.2008 Svent
	Добавил запрет на воровство у мобов под ЗБ, годпротектом, а также которые !сражаются.

14.01.2008 Svent
	По просьбам общественности - show player [имя] теперь показывает карму игрока.

09.01.2008 Krodo
	Про наемов. Ж) Осторожка при расчете шансов баша, пинка, дизарма, поножки (больше из таких
скиллов она просто напросто ни на что не влияет количественно) и обычных сависов - разделена на
пве и пвп. В пве все без изменений, в пвп осторожка уменьшается в прогрессии, чем больше мортов,
тем больше разница, не в разы, от 5 до 30% в пределах обозримых мортов. Дамаг от скрытого уменьшен
примерно на такую же величину (это не только в пвп), так же на него теперь влияют модификаторы
как самого сидящего на заднице наема, так и сидящей цели, у сидящей цели учитываются щиты.
	Заодно пофиксен берсерк, который не учитывал положений бьющихся и наличие санки/призмы.
Еще пофиксена подножка, которая при наличии у цели осторожки брала ее величину у подсекающего.

08.01.2008 Krodo
	Добавлена привилегия fullzedit - для пользования zedit lock/unlock не только 34м.
Небольшой фикс в act/tell для чаров с инвизом, потому что если иммов видно всегда, то простого
чара с просетенным имм-инвизом это не касалось и в эфире/личке получался 'кто-то'.
	Пофиксен лоад хранилищ и резетов зон при старте мада: получалось так, что сами контейнеры
грузятся тогда, когда мобов-банкиров еще нет, а ориентироваться больше там не на что при поиске.
	Кол-во предметов в общих хранах ограничено 1к, не принципиально, но не помешает.
Увеличил лимиты в файлах опечаток/багов/идеи до 500кб, пускай раз в год-два, но они по крайней мере
имеют шансы быть разобранными, а как сейчас пол года иметь переполненный файл опечаток - тупо,
заодно убрано мыло в сообщении о переполнении.

07.01.2008 Krodo
	Добавлена команда 'hcontrol outcast имя', чтобы имму можно было отписать человека от клана,
не влезая в дебри с файлом/релоадом, работает только на игроков онлайн, воевод не отписывает.
До кучи теперь при отписывании (любом: добровольном, соклановцем или иммом) персонажа переносит
за пределы клан-замка, если он находился в нем. Лоадрум трогать не стал - смысла ноль.

06.01.2008 Krodo
	Очередной фикс хранилищ... на этот раз потому, что оффлайн список каким-то образом оказался
вектором, а не листом, а в цикле с удалением элемента за один проход обращение шло как со списком.
	Перенес резет зон в самый низ boot_db, а то уже второй раз забываю про его существование при
добавлении чего-то нового в загрузку. Кстати базар там грузился после резета зон, я так понимаю
он тоже в этот момент для макса в мире не ролял.

05.01.2008 Krodo
	Поправлена бага с лишним списанием мувов, когда пытаются кричать в эфир тоже самое.
	Выяснилось, что выход через форс-ренту проходит мимо хранилищ... до кучи пришло осознание,
что выход по лд тоже можно отследить только считая любой дисконект выходом. Вобщем не знаю,
сейчас вроде уже должно любой вход/выход правильно обрабатывать. Оо Воткнут сейв при ребуте.

04.01.2008 Krodo
	Вобщем "пропадание" вроде выловил, хотя на самом деле ниче не пропадало, просто перевод в
оффлайн был воткнут в том числе и на дисконект. Потом при реконекте ес-сно ниче не подгружалось
и если чар после этого быстро не вышел/зашел нормально - стаф уходит вникуда. Вот как-то так.
Логирование пока оставлю, но fflush убрал, т.к. особо смысла в нем нет.
Update: еще минус одна бага и одна досадная очепятка, тоже способствующая уходу стафа.
Update: добавлен перевод в оффлайн загруженных, но уже неиспользуемых расшаренных хранилищ.
	В клановых пкл/дрл поправлено определение онлайн игрока, теперь онлайн считается при любом
состоянии дескриптора, кроме дисконекта и принудительного закрытия конекта.
	Слегка расширена привилегия news, чтобы был полный доступ на доски ошибок и кодеров.
	Поправлен баг, когда при смерти чара на арене должно было кидать за ворота кланового замка
(т.е. он отписан, но был заренчен в замке), хотя на самом деле кидало на ренту в замке. Хотя по
уму надо переписывать лоад-рум в момент отписывания/удаления клана/входа в игру, но щас уже толку.
	По заявкам телезрителей добавлен флаг на комнаты, запрещающий 'переместиться'.

03.01.2008 Krodo
	Залил персональные хранилища... требуют наличия в мире 331 и 332 предметов, находятся в банке.
Воткнул проверку наличия овнера в obj_from_char, потому что авось не сработал.
Update: вобщем тупо глядя в код возможности так хитро пропасть шмоткам я чет не нашел, а т.к.
сислога крайне недостаточно для анализа происходящего - воткнул хранам доп.лог в отдельный файл,
чтобы было чего почитать на досуге.
Update: Дофиксивание стаба Вьюгорном.

02.01.2008 Krodo
	Обновил classskill.lst в cvs и local_mud.zip на сайте, т.к. с теми последний код уже давно
не запускается. До кучи обновил там boost до 1.35, код конкретно его не требует, но по крайней
мере он уже знает о существовании 2008й студии и не выдает варнинги при сборке на каждом файле.

02.01.2008 Krodo
	Превед! Ж) From: cstriker1985 (я так понял это Вьюгорн):
1. Фикс крешбаги, например, при агре белого чара в шмоте !цветные на кого-то.
2. Фикс баги с пропаданием стафа, например, при смене пола персонажа на мужской и наличии
	на нем флага !мужчины.
3. Фикс баги с забитием инвентаря у потенциального чармиса и дальнейшим его наймом
	(теперь кол-во шмота в инвентаре при снятии стафа не учитывается).
4. Фикс баги с возможностью стабать в бою. В целом, там кое-где позиции нужные не выставлялись.

10.10.2007 Svent
	Добавлен скилл "боевой клич", пофикшен лаг при выставлении большого количества стафин
на базар, пофикшен креш со взятием кузнечного стафа по "взять все".

09.06.2007 Krodo
	В процессе поднятия мада на чистой фре пофиксен креш на нулевой строке при возврате
имени через ид (добавлено так сказать для истории, т.к. при откате хранилищ забыл вписать заново).

19.05.2007 Krodo
	Вобщем на арену еще добавлено 'слово возврата'. На этом тему с привилегиями иммов
для проведения турниров считаю исчерпанной.

17.05.2007 Krodo
	Привилегии слегка подправлены на тему арены, а то там в оба списка шли команды.
До кучи теперь там если в арену вписана команда restore, то будет ресторить чара только
если он на этой же арене с иммом стоит (ес-сно работает вообще только на арене). Пента,
кастуемая на арене товарисчем с привилегией arena ставится только в сторону арены, из
нее он никуда никого закинуть не сможет, только пуржем или врыв руками - на ренту.
Итого на арене мы имеем: призыв, пента, purge, restore.

16.05.2007 zone.ru
	Поправлена ошибка в ювелирке (1 обаяние не вплавлялось).

14.05.2007 Вова
	Там как выяснилось, у некоторых набранная экспа не помещается в лонг и в клан статистике
они в самом конце с огромной экспой и чет обижаются  :) заменил для сортировки лонг на лонг
лонг и до кучи добавил сортировку по первой букве имени.

10.05.2007 Вова
	Добавил возможность изменять звания соклановцев когда они находятся оффлайн.
Кроме этого при измении чьего-либо звания оповещается весь клан.

09.05.2007 Krodo
	Добавил сброс ведущихся логов на диск при креше, а то с появившейся буферизацией при креше
получался фиг в логах, сислог то сбрасывается, а остальные умирают с полным буфером.

08.05.2007 Krodo
	Есчо слегка подправил доски в плане легкости добавления и добавил таки доску 'Анонсы' для
обращений от 32+ товарисчей к народу.

08.05.2007 Вова
	Патч для сортировки вывода клановой статистики по разным полям
формат команды: клан статистика [!опыт/!заработанным/!налог/!последнему] [имя/все]
знак "!" перед параметром сортировки добавил чтоб не путаться с именами
пример команды для сортировке по налогу: "клан стат !налог все".

06.05.2007 Krodo
	Пофиксил креш-багу в users, забыли в connected_types добавлять новые состояния коннектов, хотя
щас падать не будет, даже если опять забудут. Терь таймер на шмотке включается при луте в том числе
чармисами, а не ждет перехода шмотки к игроку. Доски слегка переделал, чтобы добавлять новые было не
так геморно. Потом добавлю парочку новых по заявкам телезрителей вроде поздравлений и сообщений от
администрации о всякой фигне типа турниров и ренеймов.

04.05.2007 Krodo
	В логах, идущих сплошняком (персональные, олц, имм) сменил формат даты на нормальную, а то
есть трудности в установлении даты, если дело было давно, т.к. год в лог не писался. Заодно все
эти логи, кроме ip_log теперь открываются один раз за игру или за время персонажа в игре (в случае
персональных логов), а то чет на каждую команду чара повторять процедуру открытия/закрытия файла
имхо тупняк. В принципе там вообще все можно в одну функцию с параметром вида лога слить, но чет
влом уже везде это менять по коду. Заодно при старте мада автоматом создаются log и log/perslog
диры, чтобы не мучаться на локалках и зеркале каждый раз.
	Вынес показ версии кода ('версия') в отдельный файл, после сборки убивается его .o в мейке,
чтобы обновился при след. пересборке.
	Подправил там пурж шмоток при резете мобов в зоне, вобщем щас при пурже моба если на нем был
шмот, сунутый ему при резете зоны, то этот шмот тоже спуржится. А если был шмот, до этого побывавший
у игрока - он его выкинет на землю. Фишка в том, что при типе резета с пуржем мобов каждый раз
оставался шмот с прошлого резета на земле, иногда моб даже не успевал сам подобрать. А мог и
подобрать и потом залоадить еще такую же шмотку, т.е. шанс выпадения накапливался, а так приведено
к шансу по тригам, что мне кажется правильнее.
	При смерти моба мессага о кровушке в жилах теперь шлется в другие комнаты, только если там
кто-то вообще есть, а то спам в сислоге от act о нулевом таргете слегка утомил.

04.05.2007 Вова
	Немного доработанная команда "простить", а именно:
при прощении соответствующее собщенние выводится обоим игрокам
для избежания спама нельзя прощать не имея флага мести
также нельзя простить самого себя  :)
	Немного изменена команда месть:
"месть мне". показывает кто может мстить данному персонажу и находится онлайн (счет или активное БД)
"месть мне все". аналогична "месть мне", но показывает не только тех, кто в данный момент онлайн.

03.05.2007 Krodo
	С переполнением глобальных buf вроде пофиксил, завтра еще гляну логи, если чего надо не забыть
убрать там проверку этой фигни каждую секунду.

02.05.2007 zone.ru
	Поправлена креш-бага, когда триггер на вход уничтожает проход, но не запрещает идти
в данном направлении (зона 476, ловушки с големами). Заметил еще, что если на комнату
назначено, к примеру, два триггера на вход, то сработает только первый. Хотя мб так
и надо, хз. В той же зоне - на одной из комнат 2 трига на вход - первый открывает проход
при отсутствии всех големов, второй закрывает проход. Имх, они должны срабатывать
в другом порядке.

30.04.2007 Krodo
	Поправлена креш-бага в featset.

29.04.2007 Krodo
	Поправлена веселая бага с созданием чара через 'новый'. Если тыкаться в имя существующего
чара и потом выбрать незанятое имя - структура чар-даты оставалась от прошлого. Человечек там
седня создал чара и в игру вошел уже 21м уровнем с чужим уидом и всем остальным. Ж)

28.04.2007 zone.ru
	Теперь нельзя отравить существо в ЗБ. При использовании команды "взглянуть"
добавлен вывод соответствующего сообщения когда цель невредима. Заклинание
!определение яда! теперь работает.

28.04.2007 Krodo
	Переписал системы привилегий и списка god.lst. Пока так, потестить, описание в начале
privilege.hpp. Основная фишка в добавлении групп и флагов. Списки дефолтных команд для
иммов, для демигодов, команд, действующих только на арене. Флаги произвольного действия,
пока только для написания мною новостей и разрешения имму применять заклы/умения/руны/взламывать.
Но вообще по иммам это у меня еще не все... Ж) Заодно пофиксен релоад досок без кланов.
Сделана колонка последнего захода в клан стате, заодно по stat чара даты создания и ласт-логона
приведены в нормальный вид. макрос get_skill где надо заменен на set_skill, чтобы можно было
из них делать нормальные гетер/сетер в виде функций. По ктоя терь видно до кучи кто добавил
во враги или друзья клана, заодно имена в листах с большой буквы терь все.

26.04.2007 zone.ru
	При использовании заклинания !разыскать предмет! теперь можно использовать точку
для уточнения названия разыскиваемого предмета. Морталы больше не могут использовать
точку с запятой и цвета при написании сообщений на досках. Чармисы автоматически входят в
пентаграмму за хозяином.

22.03.2007 zone.ru
	Теперь при создании персонажа подобрать незанятое имя проще, если при запросе имени
ввести слово "новый". При этом, если персонаж уже существует, сервер попросит Вас ввести
другое имя (надо будет сменить потом заставку мада).

21.03.2007 zone.ru
	Автоматическое склонение имен по падежам при создании персонажа. Если имя определено
правильно - игрок просто нажимает Enter. Если ошибка - набирает свой вариант. Также в файл
одобренных имен теперь записывается пол персонажа, чтобы не создавали ранее одобренных
Васей женсокого пола. Старый файл с одобренными именами не используется, ведется новый.
	Добавлена возможность убрать предмет из левой или правой руки командами "снять левая"
и "снять правая" (срабатывает только при полном вводе слов и отсутствии такого предмета).

20.03.2007 Krodo
	Патч господина zone.ru для адаптации кода под сборку на ms visual studio, правда на счет
2003й пока не ясно - но это решится. У себя под 2005ю студию я его добил, должно собираться.
До кучи накачен старый патч AL'а, переписавшего асмовые вставки в utils.h на человеческий язык,
хотя zone.ru на эту тему тож накреативил, но там не для средних умов получилось зрелише. Ж)
Под g++ вроде ниче не сломалось, по крайней мере на 3.4.4 и 4.1.2 собирается без варнингов.
Инструкцию по сборке под винду попожжя добью на сайте - заодно закину архив с минимальной локалкой
и обрезанным бустом - для тех, кому жалко скачать десяток мег. На мад пока накатывать это не надо.
Накачен патч к автолуту для срабатывания при смерти моба от ангела (from Вова).
updated: вобщем под 2003й и 2005й студиями должно все собираться

28.02.2007 Krodo
	Т.к. к коду я вернусь не скоро, если вообще вернусь - хотелось бы отметить последний
найденный кусок кода, поправив который можно неплохо сэкономить памяти, да и вообще мои
мысли на тему ресурсов мада и их экономии (щас это у нас актуально, но про чудо-админа не будем):
дак вот в char_ability_data имеются три поля, объемом равные всем остальным полям в char_data
	ubyte Skills[MAX_SKILLS + 1];	/* array of skills plus skill 0     */
	ubyte SplKnw[MAX_SPELLS + 1];	/* array of SPELL_KNOW_TYPE         */
	ubyte SplMem[MAX_SPELLS + 1];	/* array of MEMed SPELLS            */
Переписав вот этот маразм на динамический массив для только нужных мобу/плееру скиллов и спеллов
(спеллы наверное лучше вообще структурой на три поля: порядковый номер/тип/мем) сэкономится
около 27мб памяти. До 30ти можно добить, если сунуть все player-only поля в указатель и не
создавать их у мобов. Ну и вообще раз уж об этом зашла речь, хочется, чтобы кодеры держали
в голове тот факт, что мобов в маде в данный момент 30к (включая прототипы), комнат почти 65к,
предметов почти 35к (опять же с прототипами), поэтому любое необдуманное в плане оптимизации
размера поле, добавленное в их структуры может сожрать в итоге много памяти. Отсюда имеем еще
один вывод, если пойти дальше: для мобов и предметов неплохо бы соорудить copy-on-write систему,
т.к. их поля от полей прототипов за время их жизни могут вообще не меняться, все же большая часть
зон стоит пустая. Тут же можно задуматься о том, нужно ли в пустых зонах полностью прогонять
моб/обж/зон-активность или разумнее поделить ее и прогонять только минимально необходимую часть.
Вобщем все это к тому, что тут можно свести к минимуму влияние новых зон на работу мада, т.к.
игроков больше не становится, а соответственно новые зоны только увеличивают кол-во неактивных
зон/мобов/предметов в мире.

20.02.2007 Krodo
	Почитав стоны на форуме таки полез в систему анти-ксера шмота. Ж)
Вобщем баг с пропаданием как копии, так и оригинала поправлен, по идее ща все будет норм.
Обработан напильником поиск пути мобов, во-первых меньше кода, во-вторых работает быстрее,
в-третьих не занимается сотнями мелких аллокаций памяти каждую секунду, ибо мобов много.

06.02.2007 Ковшегуб
	Исправления неправильных сообщений о мобах, которые SEX_POLY (они).

05.02.2007 Krodo
	Вобщем вынес всю работу с паролями в один файл + прикрутил md5, хотя толку
с него сейчас тоже уже не особо много. Зато если вдруг надумается подключить
какую-нить либу с ядреным алгоритмом - все уже под это дело готово. Конвертит
при удачном входе/создании чара/смене пароля. Пароль должен быть от 10 до 50
символов. Как-нить сильно потом надо будет напомнить игрокам и иммам (а особенно
иммам типа белобога и игрокам типа софи, хехе), чтобы сменили пароли для верности.

04.02.2007 Krodo
	Ну вобщем почитав стоны на форуме залез я в этот крэш-сейв шмота чармисов.
По-моему ща должно все сейвить при сейве чара, причем всех, как чармисов, так и
нанятых мобов. И мне кажется там макрос IS_CHARMICE был кривой.

23.12.2006 Карачун
	Исправлен креш-баг с "одеть все".

27.11.2006
	Подключили сет-стафф в коде, автор патча - Вьюгорн.
11.11.2006 Svent
	Пофиксили багу с отрицательной броней у проклятых стафин.

18.10.2006 Krodo
	Поглядел чего там за магия творится в резетах зон. Теперь зоны резетятся
в два с небольшим раза быстрее.

16.10.2006 Карачун
	Вставил в антиксер удаление предметов.

15.10.2006 Krodo
	Вобщем на 4.1.2 gcc при включенной оптимизации мад нормально работать
отказывается, зато много чего обновили на серве, пока там Черный живой. Ж)
	Добавлена система автоматической регистрации чара по ранее (register)
зарегистрированному имейлу, в плане работы иммов и игроков никаких изменений
не привносит и старый флаг регистраций тоже не трогает, поэтому можно не
вникать, работает само по себе, никого не трогает.

11.10.2006 Krodo
	Синтаксис одобрений имен и титулов приведен к некоему единообразию, раз уже
все привыкли к формату 'имя вася одобрить', хотя он и неудачный. Вобщем удаление
из списка имен теперь тоже через 'имя вася удалить', одобрения/запреты титулов
через титул вася одобрить/запретить.
	Пофиксен крэш на передаче оживленных скакунов и последующем проходе по этим
полям у чара.

10.10.2006 Krodo
	При удалении персонажа по собсвенной воле - отписываем от клана, чтобы он
там не висел зря и не дублировался в случае повторного создания/удаления и
приписке к клану. Фигня остается, только если его сделетили через сет, но тут
я по другому сделаю потом, не такая уж и горящая проблема, он всеравно из клана
вынесется при следующем ребуте.

10.10.2006 Карачун
	Изменения в формуле перековки.

09.10.2006 Krodo
	Залил измененную команду 'титул', пока так - потестить, много че еще поменяю.
Иммам щас раз в 5 минут будет список выдаваться, если есть неодобренные имена или
титулы. Письма щас на локалке читать можно будет при отсутствии 330 предмета в
мире. Сообщение о новых письмах терь прилетает сразу при отправке, если адресат
онлайн, при релогине и логине (как обычно). При релогине также пишет о новых
сообщениях на досках.

06.10.2006 Krodo
	Посидев с профайлером подправил вывод базара при "б п в" с пустым фильтром и
если просто много преметов подпало под запрос - терь тут лагать не будет.
	Переписаны медленные дт, терь оно не бегает каждые 2 секунды по 64к румам.

05.10.2006 Карачун
	Переписано сохранение/загрузка базара. Должен понимать и новый и
старый формат. Сохраняет в новом. Введены UID для предметов с положительным
VNUM. При совпадении у двух предметов UID и VNUM иммам будет выводиться сообщение.
Плюс поправлены мелкие баги.

04.10.2006 Карачун
	Мобы лутеры и шмотеры теперь берут шмот из запертых контейнеров,
если есть ключ или могут взломать. Если взяли деньги, то они теперь
не добавляются кучками в инвентарь, а плюсуются к деньгам. Кроме того,
для лутеров сменил порядок взятия шмота. Сначала берется все из инвенторя,
потом из открытых сундуков, потом из закрытых.

03.10.2006 Krodo
	Вобщем чтобы не парить мозг кодерам на локалке - предлагается собирать
мад командой 'make test'. В данном случае оно будет собираться без капитальной
оптимизации (раза так в два быстрее), без использования криптования, первый чар
в игре будет иммом 34 уровня и в год-лист ничего писать не надо, он отключен,
т.е. любой чар апнутый до 34 уровня будет сразу иммом со всеми командами.

03.10.2006 Карачун
	1. Поправлены склонения при открытии/закрытии дверей с той стороны.
	2. Теперь бэттл экспа не идет, если у моба экспа установлена в 0.
	3. "Кураж прошел. Мама, лучше бы я умер вчера." -> исправлено склонение.
	4. Команда "прик все", если чар начанается на "все", не предлагает больше
	обратиться к психиатру.
	5. Сник теперь снимается во время боя.
	6. Развеянные мобы теперь выбрасывают еще и деньги.

02.10.2006 Krodo
	Иммов теперь видно при фактически любом их взаимодействии через act(),
не всмысле, что будет видно то, чего раньше не было видно, а в смысле, что
вместо кто-то будет видно имя. Типа при теллах в личку, в группу, в комнату,
криках в эфир, эмоциях, касте заклинаний и всего такого. Ес-сно если имм в
инвизе, то его не видно по кто и всяким другим действиям типа прыжков или
просто ходьбе по зоне, вобщем мысль такая: тебя не видно, пока ты сам не
пропалишься в действиях с игроками. Я не парсил весь код на вызовы act(),
поэтому некоторые казусы могут и возникнуть. Ну поправим, хрена ли.
У любителей инвиза остается мощная фигня под названием эхо/гэхо.
	Демигоды и чары с флагом кодер (которых вообще уже наверное не осталось)
больше не греют ушки в канале воззваний (по заявкам Свента).
	Фишка с осм сундук земля поправлена, вобщем-то заодно переписал работу с
хранилищем со спешиала на хук в двух местах при осмотре предмета и контейнера.
	Кланы и базар перенесены в lib/plrstuff/ - вобщем-то только потому, что
так проще всего решается проблема с бэкапами, Черного ждать не вариант.

02.10.2006 Карачун
	Пофиксены баги:
	1. Стаб можно было провести сидя.
	2. Количество слотов расчитывалось через морты, а не через скил.
	3. Иногда при входе в игру на игроке оставались аффекты "в седле" и "в группе"
	4. При удалении мобов командой в зоне Q теперь не удаляются воскрешенные мобы и
	стаф при удалении остается на земле.
	5. Горное нельзя было прокачать выше 99, если навык 99.

30.09.2006 Свентовит
	Увеличена функциональность способности "Травник".
	Теперь она позвоялет видеть не только уровень, но и тип ингредиента.

30.09.2006 Карачун
	Пофиксены баги:
	1. С таймерами умений. При использовании умения таймер не
	обновлялся, а добавлялся в список. В результате при записи в файл игрока
	могла появиться двойная запись одного умения.
	2. Моб агрил, когда замечал стаб на себя, даже если был в лаге.
	3. Если игрок атаковал своего скакуна, сидя на нем, скакун башил себя.
	4. Игрок без инфры в темноте не мог тельнуть другим игрокам, хотя по
	команде "кто" их видел.
	5. Нельзя было сагрить на игрока в комнате с флагами "мирная" и "арена".
	6. Украсть качалось на холженых мобах даже если у них ничего нет.

30.09.2006 Krodo
	Третий раз накатил группировку предметов в контейнерах, инве и на земле,
которую после первого раза еще переделал AL. В этот раз обошел стороной
магазины, теперь глючить вроде как не должно.

29.09.2006 Krodo
	Пофиксен крэш на предмете с невалидным рнумом на базаре, заодно
предметы с отрицательным рнумом (типа писем) нельзя выставить на базар
(строчку с проверкой на рнум >= 0 при выставлении предмета на базар
любезно предоставила Ясна).

29.09.2006 Карачун
	1. Поправлен абуз с прокачкой ювелирки.
	2. Теперь при вплавлении выборочного аффекта в перековку не выдается
	список в три экрана, а пишутся возможные аффекты для текущего камня.

27.09.2006 Krodo
	Вобщем если у кого-то вдруг(!) возникнет желание обновлять этот файл,
то пишите в таком вот формате, никому эти напряги не нужны с файлами и
версиями, меньше напрягов - больше вероятности не забить.
	Тут вот пошло второе изменение...

26.09.2006 Krodo
	А тут вот вчерашнее типа... вроде не трудно накреативить пару-тройку
строк вместе с очередным патчем.


Дата: 2004/07/04
Автор: skwiz(Воропай)
Файлы: ban.cpp, ban.hpp
Описание:
   Баны теперь дисконнектят всех игроков с этим ИП. Автобан пишет в лог.
---
Дата: 2004/06/29
Автор: skwiz(Воропай)
Файлы: comm.cpp, ban.cpp, ban.hpp
Описание:
  Сделал подгрузку бан-прокси из файлика каждые 5 минут.
  Также при бане говорит, до каких пор был забанен.
---
Дата: 2004/06/29
Автор: skwiz(Воропай)
Файлы: magic.cpp spell_parcer.cpp
Описание:
  Поругавшись и поспорив с Кродо уменьшил отриц. аффекты у слабости и проклы.
Также перевел все заклинания хх_аура на групповой режим. *взд соло они не
кастуюцца.
---
Дата: 2004/06/29
Автор: skwiz(Воропай)
Файлы: magic.cpp
Описание:
   Усилил заклинания !слабость!, !истощить энергию! - минус на силу теперь больше.
!проклятие! и !масс проклятие! - дают отрицательнй каст на 20+левеле кастера
---
Дата: 2004/06/28
Автор: skwiz(Воропай)
Файлы: pk.h, pk.cpp, structs.h, act.movement.cpp, spells.cpp
Описание:
  Пофиксил треш-пенты. Теперь при входе в двустороннюю пенту вешается 3х
минутный флаг, дающий право на свободный отстрел в !мирных комнатах. Вход
с обратной стороны пенты - свободный.
---
Дата: 2004/06/08
Автор: alez
Файлы: пол проекта
Описание:
  Еще один маленький шаг в большом деле разгребания бардака с ф-ями в коде.
В проект включены skills.h и skills.cpp. Тем самым разгрузил на 1к строк
fight.cpp. Немного почистил другие файлы. Усовершенствована автопомощь
(спасибо Далиму) теперь в бой за любого согруппника будут втупаться все
кто в группе имеет флаг автопомощь.
---
Дата: 2004/06/07
Автор: alez
Файлы: act.wizard.cpp(1.39)
Описание:
  Команда stat obj ... будет выводить имя создателя предмета (его
загрузившего командой load или сделашего из игридиентов), ранее
выводился только его UNIQUE. Предметы при загрузке командой do_load
теперь будут запоминать UNIQUE создателя.
---
Дата: 2004/06/07
Автор: alez
Файлы: act.informative.cpp(1.47)
Описание:
  Команда "разделы"(do_index) теперь учитывает уровень топика справки и
не отобразит тему если игрока ниже уровня разрешения чтения топика.
---
Дата: 2004/06/07
Автор: krodo
Файлы: да хз
Описание:
   Вобщем персональные логи переделал по другому, старую версию убрал, туповато
это все было и не мобильно в плане ребутов. Опять немного потрогал иммов. Ж)
Так же всем заинтересованным сообщается, что терь можно пинать Алекса на тему
потестить код на живом маде - зеркало поднято, код обновляется и собирается из
цвс автоматом, процедура вобщем не долгая, пусть не отмазывается и помогает. Ж)
---
Дата: 2004/06/06
Автор: alez
Файлы: act.offensive.cpp(1.13)
Описание:
  Поправлен (я надеюсь :)) баг с лагом прикрытия.
Спасибо Воропаю за нахождение, и Иллерию за длительное пинание по
этому поводу. :)
---
Дата: 2004/06/06
Автор: alez
Файлы: весь проект
Описание:
  Прошерстили все файлы программой indent с ключем -gnu.
Спасибо Раххалю , наставил на путь истинный :). В проект включены
но пока не работают :) файлы тотолизатора. Команду mngarena лучше не юзать :).
Теперь перед заливкой файла в CVS пишем indent -gnu имя файла.
Табуляция 8. Сами ставим какую хочется indent потом все переправит.
---
Дата: 2004/06/04
Автор: Воропай
Файлы: auction.cpp (1.8)
Описание:
  Добавлен подкоманда для аукциона рассмотреть ... отображает персонажу
информацию о типе предмета, его таймере, предупреждает если вещь не
будет достпна персонажу. Если палочка или посох пишет что она (б/у).
---
Дата: 2004/06/03
Автор: krodo
Файлы: act.other.cpp(1.23) act.wizard.cpp(1.30) interpreter.cpp(1.35)
    utils.h (1.16) utils.cpp (1.14)
Описание:
  Еще один тип сислога - по умолчанию показывается всем выше 31 левела даже без
команды syslog в привилегиях. Показываются наказания других иммов и появления
новых игроков с инфой об одобрении. Из общего списка команд убраны все режимы.
---
Дата: 2004/06/02
Автор: alez
Файлы: ToDoList(1.1)
Описание:
  Добавлен в проект файл текущих заданий и ошибок.
---
Дата: 2004/06/02
Автор: krodo
Файлы: house.cpp(1.7) act.comm.cpp(1.9) fight.cpp(1.21)
Описание:
   В пкл/дрл не видно иммов, включая 31 левела. Нельзя добавить в дрл/пкл
никого из 31+. Говорить в чужие клан-каналы теперь для 33+.
Теперь при муте можно пользоваться аукционом. Автолут теперь должен сканить
и брать только с трупов на земле. А режим задание так и не убран. Ж)
---
Дата: 2004/06/02
Автор: krodo
Файлы: act.informative.cpp (1.32), interpreter.cpp (1.32), act.movement.cpp(1.7)
Описание:
  Команда 'статистика' - цветастый список сколько каких проф в игре, привет Ладону Ж)
Иммов не считает, но остальных всех и пофигу видно/не видно и т.п.
Слепой теперь не можешь открыть/закрыть/взломать двери.
---
Дата: 2004/06/01
Автор: krodo
Файлы: act.wizard.cpp (1.27)
Описание:
  К shutdown добавлен ключ cancel, отменяет ребут, а то маразм. Ж)
При вводе shutdown без параметров или с неверным  параметром - выдает подсказку,
а не стопит серв без предупреждений.
---
Дата: 2004/06/01
Автор: alez
Файлы: item.creation.cpp (1.16)
Описание:
  Изменена зависимость переноса наводимых аффектов на объекты.
Теперь сила ингра равна вероятности переноса аффекта на прототип.
---
Дата: 2004/06/01
Автор: alez
Файлы: item.creation.cpp (1.15)
Описание:
  Внесены поправки в формулу расчета фейла при создании объекта.
Исправлены опечатки.
---
Дата: 2004/06/01
Файлы: Makefile(1.7), .depend(1.1)
Автор: alez
Описание:
  Вынес зависимости из мейкфайла в файл .depend. Новый файл
зависимости можно построить добавив в мейкфайл новые файлы
*.сpp и *.o и набрав make depend.
---
Дата: 2004/06/01
Файлы: interpreter.cpp (1.31), act.item.cpp (1.14) fight.cpp (1.20)
Автор: krodo
Описание:
  Авто-раздел кун вобщем вынесен из авто-лута, теперь делит при любом поднимании
денег с земли/трупа, не зависимо автолутом поднято или ручками. В автолут/кунах
вставлено имя трупа, с которого лутится. Добавлено set name всем иммам.
Через set name терь ток падежи, ренейм 34 онли. Терь имма нельзя посадить/помутить/
подамбить/посадить в неймрум. Шоб не смущали иммов без оных команд.
Пара опечаток в коде, даже влом смотреть в каких файлах уже. Ж)
Чет по-моему быстро обломает все это писать на каждый фикс. Ж)
---
Дата: 2004/05/29
Файлы: ChangeLog (1.1)
Автор: alez
Описание:
  В проект добавлен файл с записями о проделанных изменениях.
---
